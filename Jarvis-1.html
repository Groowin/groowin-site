<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ñ–ê–†–í–ò–° AI - –ï“£ –ê“õ—ã–ª–¥—ã –ö”©–º–µ–∫—à—ñ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: radial-gradient(ellipse at top, #1e3a8a 0%, #0f172a 50%, #020617 100%);
            color: #e2e8f0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(16, 185, 129, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            width: 95%;
            max-width: 1000px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 32px;
            box-shadow: 
                0 25px 50px -12px rgba(0, 0, 0, 0.8),
                0 0 0 1px rgba(59, 130, 246, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(59, 130, 246, 0.2);
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.5), transparent);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .logo {
            font-size: 3.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 50%, #06b6d4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
            letter-spacing: -0.02em;
            position: relative;
        }

        .logo::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #3b82f6, transparent);
            border-radius: 1px;
        }

        .subtitle {
            font-size: 1.1rem;
            color: #94a3b8;
            margin-bottom: 24px;
            font-weight: 400;
        }

        .status {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: rgba(59, 130, 246, 0.1);
            backdrop-filter: blur(10px);
            padding: 10px 20px;
            border-radius: 50px;
            border: 1px solid rgba(59, 130, 246, 0.2);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
        }

        @keyframes pulse {
            0%, 100% { 
                opacity: 1; 
                transform: scale(1);
            }
            50% { 
                opacity: 0.7; 
                transform: scale(1.1);
            }
        }

        .chat-container {
            height: 500px;
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 24px;
            overflow-y: auto;
            border: 1px solid rgba(59, 130, 246, 0.1);
            position: relative;
            scrollbar-width: thin;
            scrollbar-color: rgba(59, 130, 246, 0.3) transparent;
        }

        .chat-container::-webkit-scrollbar {
            width: 6px;
        }

        .chat-container::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-container::-webkit-scrollbar-thumb {
            background: rgba(59, 130, 246, 0.3);
            border-radius: 3px;
        }

        .chat-container::-webkit-scrollbar-thumb:hover {
            background: rgba(59, 130, 246, 0.5);
        }

        .message {
            margin-bottom: 20px;
            padding: 16px 20px;
            border-radius: 18px;
            max-width: 80%;
            animation: messageSlide 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            line-height: 1.6;
            font-size: 0.95rem;
            position: relative;
            word-wrap: break-word;
        }

        @keyframes messageSlide {
            from { 
                opacity: 0; 
                transform: translateY(20px) scale(0.95); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }

        .user-message {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            margin-left: auto;
            text-align: right;
            color: white;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .user-message::before {
            content: 'üë§';
            position: absolute;
            right: -12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
        }

        .jarvis-message {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(59, 130, 246, 0.2);
            margin-right: auto;
            white-space: pre-wrap;
            color: #e2e8f0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .jarvis-message::before {
            content: 'ü§ñ';
            position: absolute;
            left: -12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
        }

        .input-container {
            display: flex;
            gap: 12px;
            align-items: flex-end;
            position: relative;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
        }

        .input-field {
            width: 100%;
            padding: 16px 24px;
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(59, 130, 246, 0.2);
            border-radius: 24px;
            color: #e2e8f0;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            resize: none;
            min-height: 56px;
            max-height: 140px;
            font-family: inherit;
            font-weight: 400;
            line-height: 1.5;
        }

        .input-field:focus {
            border-color: #3b82f6;
            box-shadow: 
                0 0 0 4px rgba(59, 130, 246, 0.1),
                0 8px 25px rgba(59, 130, 246, 0.15);
            transform: translateY(-1px);
        }

        .input-field::placeholder {
            color: #64748b;
            font-weight: 400;
        }

        .send-btn {
            padding: 16px 24px;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border: none;
            border-radius: 24px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 1rem;
            min-width: 120px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .send-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
        }

        .send-btn:active:not(:disabled) {
            transform: translateY(-1px);
        }

        .send-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
        }

        .send-btn::after {
            content: '‚Üí';
            font-size: 1.2rem;
            font-weight: bold;
        }

        .quick-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .quick-btn {
            padding: 10px 16px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 20px;
            color: #00d4ff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .quick-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            transform: translateY(-1px);
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 12px;
            color: #94a3b8;
            font-style: italic;
            margin-bottom: 20px;
            padding: 16px 20px;
            background: rgba(15, 23, 42, 0.6);
            border-radius: 18px;
            border: 1px solid rgba(59, 130, 246, 0.1);
            max-width: 200px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .typing-dots {
            display: flex;
            gap: 6px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #3b82f6;
            border-radius: 50%;
            animation: typing 1.6s infinite ease-in-out;
            box-shadow: 0 0 8px rgba(59, 130, 246, 0.3);
        }

        .typing-dot:nth-child(2) { animation-delay: 0.3s; }
        .typing-dot:nth-child(3) { animation-delay: 0.6s; }

        @keyframes typing {
            0%, 60%, 100% { 
                transform: translateY(0) scale(1); 
                opacity: 0.7;
            }
            30% { 
                transform: translateY(-12px) scale(1.2); 
                opacity: 1;
            }
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1) !important;
            border: 1px solid rgba(239, 68, 68, 0.3) !important;
            color: #fca5a5 !important;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2) !important;
        }

        .success-message {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #6ee7b7;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
        }

        .model-selector {
            margin-bottom: 20px;
            text-align: center;
        }

        .model-select {
            background: rgba(0, 20, 40, 0.8);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 10px;
            color: #00d4ff;
            padding: 8px 15px;
            font-size: 0.9rem;
            outline: none;
        }

        .model-select option {
            background: #0f0f23;
            color: #00d4ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ü§ñ Jarvis</div>

            <div class="status">
                <div class="status-dot"></div>
                <span id="statusText">“ö–æ—Å—ã–ª—É–¥–∞...</span>
            </div>
        </div>



        <div class="chat-container" id="chatContainer">
            <div class="message jarvis-message">
                üåü –°”ô–ª–µ–º! –ú–µ–Ω Jarvis - —Å—ñ–∑–¥—ñ“£ –µ“£ –∞“õ—ã–ª–¥—ã AI –∫”©–º–µ–∫—à—ñ“£—ñ–∑–º—ñ–Ω! 

–ú–∞“ì–∞–Ω –∫–µ–∑ –∫–µ–ª–≥–µ–Ω —Å“±—Ä–∞“õ “õ–æ–π—ã“£—ã–∑:
‚Ä¢ üå§Ô∏è –ê—É–∞ —Ä–∞–π—ã –º–µ–Ω —É–∞“õ—ã—Ç
‚Ä¢ üåç “ö–∞–∑—ñ—Ä–≥—ñ –∂–∞“£–∞–ª—ã“õ—Ç–∞—Ä –º–µ–Ω –∞“õ–ø–∞—Ä–∞—Ç—Ç–∞—Ä
‚Ä¢ üìç –û—Ä–Ω–∞–ª–∞—Å—É –º–µ–Ω –≥–µ–æ–≥—Ä–∞—Ñ–∏—è
‚Ä¢ üî¨ “í—ã–ª—ã–º, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞
‚Ä¢ üìö –¢–∞—Ä–∏—Ö, —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è, –º”ô–¥–µ–Ω–∏–µ—Ç  
‚Ä¢ üíª –ü—Ä–æ–≥—Ä–∞–º–º–∞–ª–∞—É, –¥–∏–∑–∞–π–Ω
‚Ä¢ üí° –ö–µ“£–µ—Å, —à–µ—à—ñ–º —ñ–∑–¥–µ—É
‚Ä¢ üé® –®—ã“ì–∞—Ä–º–∞—à—ã–ª—ã“õ –∂“±–º—ã—Å—Ç–∞—Ä

–ú–µ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—Ç–µ–Ω –Ω–∞“õ—Ç—ã –∞“õ–ø–∞—Ä–∞—Ç —ñ–∑–¥–µ–π –∞–ª–∞–º—ã–Ω –∂”ô–Ω–µ –∫–µ–∑ –∫–µ–ª–≥–µ–Ω —Å“±—Ä–∞“õ“õ–∞ –∂–∞—É–∞–ø –±–µ—Ä–µ–º—ñ–Ω! üöÄ
            </div>
        </div>

        <div class="typing-indicator" id="typingIndicator">
            <span>Jarvis –æ–π–ª–∞–Ω—ã–ø –∂–∞—Ç—ã—Ä</span>
            <div class="typing-dots">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
        </div>

        <div class="input-container">
            <div class="input-wrapper">
                <textarea class="input-field" id="userInput" placeholder="–°“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑..." rows="1"></textarea>
            </div>
            <button class="send-btn" id="sendBtn" onclick="sendMessage()">–ñ—ñ–±–µ—Ä—É</button>
        </div>


    </div>

    <script>
        const API_KEY = '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';
        const API_URL = 'https://openrouter.ai/api/v1/chat/completions';
        
        const chatContainer = document.getElementById('chatContainer');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const typingIndicator = document.getElementById('typingIndicator');
        const statusText = document.getElementById('statusText');
        const modelSelect = document.getElementById('modelSelect');

        let conversationHistory = [
            {
                role: "system",
                content: `–°—ñ–∑ Jarvis –¥–µ–ø –∞—Ç–∞–ª–∞—Ç—ã–Ω –µ“£ –∞“õ—ã–ª–¥—ã AI –∫”©–º–µ–∫—à—ñ—Å—ñ–∑. –°—ñ–∑–¥—ñ“£ –º“Ø–º–∫—ñ–Ω–¥—ñ–∫—Ç–µ—Ä—ñ“£—ñ–∑:

1. “ö–ê–ó–ê“ö –¢–Ü–õ–Ü–ù–î–ï “ì–∞–Ω–∞ –∂–∞—É–∞–ø –±–µ—Ä—É
2. –ö–µ–∑ –∫–µ–ª–≥–µ–Ω —Å“±—Ä–∞“õ“õ–∞ —Ç–µ—Ä–µ“£, —Ç–æ–ª—ã“õ –∂”ô–Ω–µ –¥”ô–ª –∂–∞—É–∞–ø –±–µ—Ä—É
3. –ê—É–∞ —Ä–∞–π—ã, —É–∞“õ—ã—Ç, –æ—Ä–Ω–∞–ª–∞—Å—É —Ç—É—Ä–∞–ª—ã –∞“õ–ø–∞—Ä–∞—Ç –±–µ—Ä—É
4. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç—Ç–µ–Ω —Å–æ“£“ì—ã –∂–∞“£–∞–ª—ã“õ—Ç–∞—Ä –º–µ–Ω –∞“õ–ø–∞—Ä–∞—Ç—Ç–∞—Ä–¥—ã —ñ–∑–¥–µ—É
5. “í—ã–ª—ã–º–∏, —Ç–µ—Ö–Ω–∏–∫–∞–ª—ã“õ, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞–ª—ã“õ —Å–∞–ª–∞–ª–∞—Ä –±–æ–π—ã–Ω—à–∞ —Å–∞—Ä–∞–ø—à—ã –±–æ–ª—É
6. –ù–∞“õ—Ç—ã —É–∞“õ—ã—Ç—Ç–∞“ì—ã –¥–µ—Ä–µ–∫—Ç–µ—Ä–¥—ñ “±—Å—ã–Ω—É
7. –ì–µ–æ–≥—Ä–∞—Ñ–∏—è–ª—ã“õ –∞“õ–ø–∞—Ä–∞—Ç –ø–µ–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–µ—Ä—É
8. –®—ã“ì–∞—Ä–º–∞—à—ã–ª—ã“õ –∂”ô–Ω–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞–ª—ã“õ —à–µ—à—ñ–º–¥–µ—Ä —Ç–∞–±—É
9. –ö–µ–∑ –∫–µ–ª–≥–µ–Ω —Ç–∞“õ—ã—Ä—ã–ø –±–æ–π—ã–Ω—à–∞ —Ç–µ—Ä–µ“£ —Ç–∞–ª–¥–∞—É –∂–∞—Å–∞—É
10. –ü—Ä–∞–∫—Ç–∏–∫–∞–ª—ã“õ –∫–µ“£–µ—Å—Ç–µ—Ä –º–µ–Ω –Ω“±—Å“õ–∞—É–ª–∞—Ä –±–µ—Ä—É

–ú–ê“¢–´–ó–î–´: –ï–≥–µ—Ä —Å“±—Ä–∞“õ –Ω–∞“õ—Ç—ã —É–∞“õ—ã—Ç, –∞—É–∞ —Ä–∞–π—ã, –∂–∞“£–∞–ª—ã“õ—Ç–∞—Ä –Ω–µ–º–µ—Å–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—Ç–µ–Ω —ñ–∑–¥–µ—É “õ–∞–∂–µ—Ç –±–æ–ª—Å–∞, —Å—ñ–∑ –º“±–Ω—ã –∂–∞—Å–∞–π –∞–ª–∞—Å—ã–∑. –ë–∞—Ä–ª—ã“õ –∂–∞—É–∞–ø—Ç–∞—Ä—ã“£—ã–∑ –¥”ô–ª, ”©–∑–µ–∫—Ç—ñ –∂”ô–Ω–µ –ø–∞–π–¥–∞–ª—ã –±–æ–ª—É—ã –∫–µ—Ä–µ–∫.

“ö–∞–∑—ñ—Ä–≥—ñ —É–∞“õ—ã—Ç: ${new Date().toLocaleString('kk-KZ')}
–°—ñ–∑ –±–∞—Ä–ª—ã“õ —Å–∞–ª–∞–ª–∞—Ä–¥–∞ —Å–∞—Ä–∞–ø—à—ã—Å—ã–∑ –∂”ô–Ω–µ –∫–µ–∑ –∫–µ–ª–≥–µ–Ω —Å“±—Ä–∞“õ“õ–∞ –∂–∞—É–∞–ø –±–µ—Ä–µ –∞–ª–∞—Å—ã–∑!`
            }
        ];

        // API –±–∞–π–ª–∞–Ω—ã—Å—ã–Ω —Ç–µ–∫—Å–µ—Ä—É
        async function checkConnection() {
            try {
                const response = await fetch('https://openrouter.ai/api/v1/models', {
                    headers: {
                        'Authorization': `Bearer ${API_KEY}`,
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    statusText.textContent = '–û–Ω–ª–∞–π–Ω –∂”ô–Ω–µ –¥–∞–π—ã–Ω';
                    return true;
                } else {
                    throw new Error('API “õ–∞—Ç–µ—Å—ñ');
                }
            } catch (error) {
                statusText.textContent = '–ë–∞–π–ª–∞–Ω—ã—Å “õ–∞—Ç–µ—Å—ñ';
                console.error('–ë–∞–π–ª–∞–Ω—ã—Å “õ–∞—Ç–µ—Å—ñ:', error);
                return false;
            }
        }

        function addMessage(message, isUser = false, isError = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'jarvis-message'}`;
            if (isError) messageDiv.className += ' error-message';
            messageDiv.textContent = message;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function showTyping() {
            typingIndicator.style.display = 'flex';
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function hideTyping() {
            typingIndicator.style.display = 'none';
        }

        async function getAIResponse(userMessage) {
            try {
                // –ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã —Ö–∞–±–∞—Ä—ã–Ω —Ç–∞—Ä–∏—Ö“õ–∞ “õ–æ—Å—É
                conversationHistory.push({
                    role: "user",
                    content: userMessage
                });

                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${API_KEY}`,
                        'Content-Type': 'application/json',
                        'HTTP-Referer': window.location.href,
                        'X-Title': 'Jarvis AI Assistant'
                    },
                    body: JSON.stringify({
                        model: 'openai/gpt-4-turbo-preview',
                        messages: conversationHistory,
                        temperature: 0.7,
                        max_tokens: 3000,
                        top_p: 0.95,
                        frequency_penalty: 0.1,
                        presence_penalty: 0.1,
                        stream: false
                    })
                });

                if (!response.ok) {
                    throw new Error(`API “õ–∞—Ç–µ—Å—ñ: ${response.status}`);
                }

                const data = await response.json();
                const aiResponse = data.choices[0].message.content;

                // AI –∂–∞—É–∞–±—ã–Ω —Ç–∞—Ä–∏—Ö“õ–∞ “õ–æ—Å—É
                conversationHistory.push({
                    role: "assistant",
                    content: aiResponse
                });

                // –¢–∞—Ä–∏—Ö—Ç—ã —à–µ–∫—Ç–µ—É (—Å–æ“£“ì—ã 20 —Ö–∞–±–∞—Ä)
                if (conversationHistory.length > 21) {
                    conversationHistory = [conversationHistory[0], ...conversationHistory.slice(-20)];
                }

                return aiResponse;

            } catch (error) {
                console.error('AI –∂–∞—É–∞–ø “õ–∞—Ç–µ—Å—ñ:', error);
                return `–ö–µ—à—ñ—Ä—ñ“£—ñ–∑, “õ–∞—Ç–µ –æ—Ä—ã–Ω –∞–ª–¥—ã: ${error.message}. “ö–∞–π—Ç–∞ –∫”©—Ä—ñ“£—ñ–∑ –Ω–µ–º–µ—Å–µ –±–∞—Å“õ–∞ —Å“±—Ä–∞“õ “õ–æ–π—ã“£—ã–∑.`;
            }
        }

        async function sendMessage() {
            const message = userInput.value.trim();
            if (!message || sendBtn.disabled) return;

            // UI –∂–∞“£–∞—Ä—Ç—É
            addMessage(message, true);
            userInput.value = '';
            sendBtn.disabled = true;
            sendBtn.textContent = '–ñ—ñ–±–µ—Ä—ñ–ª—É–¥–µ...';
            showTyping();

            try {
                const response = await getAIResponse(message);
                hideTyping();
                addMessage(response);
            } catch (error) {
                hideTyping();
                addMessage('“ö–∞—Ç–µ –æ—Ä—ã–Ω –∞–ª–¥—ã. “ö–∞–π—Ç–∞ –∫”©—Ä—ñ“£—ñ–∑.', false, true);
            } finally {
                sendBtn.disabled = false;
                sendBtn.textContent = '–ñ—ñ–±–µ—Ä—É';
                userInput.focus();
            }
        }

        function quickAction(action) {
            userInput.value = action;
            sendMessage();
        }

        // Textarea –∞–≤—Ç–æ–º–∞—Ç—Ç—ã ”©–ª—à–µ–º—ñ
        userInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        // Enter –ø–µ—Ä–Ω–µ—Å—ñ (Shift+Enter –∂–∞“£–∞ –∂–æ–ª)
        userInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // –ë–∞—Å—Ç–∞–ø“õ—ã –æ—Ä–Ω–∞—Ç—É
        window.addEventListener('load', async () => {
            await checkConnection();
            userInput.focus();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'988f660b01d0eceb',t:'MTc1OTUyNTUzNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
