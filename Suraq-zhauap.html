<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–∞–π—ã–Ω–¥—ã“õ “õ–æ—Å—ã–º—à–∞—Å—ã</title>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .main-content {
            padding: 30px;
        }
        
        .section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .nav-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }
        
        .nav-btn.active {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .input-group {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .input-column {
            flex: 1;
            min-width: 300px;
        }
        
        .input-column label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        .input-column textarea {
            width: 100%;
            height: 120px;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 14px;
            resize: vertical;
            transition: border-color 0.3s ease;
        }
        
        .input-column textarea:focus {
            outline: none;
            border-color: #4facfe;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #333;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }
        
        .qa-list {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .qa-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #4facfe;
        }
        
        .qa-item:last-child {
            margin-bottom: 0;
        }
        
        .question {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }
        
        .answer {
            color: #666;
            font-style: italic;
        }
        
        .save-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .save-section input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        .saved-sets {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .set-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e1e5e9;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .set-card:hover {
            border-color: #4facfe;
            transform: translateY(-2px);
        }
        
        .set-card h3 {
            margin: 0 0 10px 0;
            color: #333;
        }
        
        .set-card p {
            margin: 0;
            color: #666;
            font-size: 14px;
        }
        
        .study-mode {
            text-align: center;
            padding: 40px 20px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 40px;
            margin: 20px auto;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: scale(1.02);
        }
        
        .card-content {
            font-size: 18px;
            line-height: 1.6;
        }
        
        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .quiz-option {
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }
        
        .quiz-option:hover {
            border-color: #4facfe;
        }
        
        .quiz-option.correct {
            background: #d4edda;
            border-color: #28a745;
        }
        
        .quiz-option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }
        
        .progress-bar {
            background: #e1e5e9;
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            height: 100%;
            transition: width 0.3s ease;
        }
        
        .results {
            text-align: center;
            padding: 40px;
            background: #f8f9fa;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .score {
            font-size: 3rem;
            font-weight: 700;
            color: #4facfe;
            margin-bottom: 10px;
        }
        
        .study-notes {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }
        
        .note-item {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 4px solid #4facfe;
        }
        
        .note-title {
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .note-content {
            color: #666;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div style="position: absolute; top: 20px; left: 20px; font-size: 12px; color: #666; z-index: 10; line-height: 1.4;">
            –ê–≤—Ç–æ—Ä: –ê—Å–∫–µ—Ä–æ–≤ –ê–ª–º–∞—Å –∂”ô–Ω–µ –ú–∞“ì–∑–æ–º–æ–≤–∞ –ê—Ä—É–∂–∞–Ω<br>
            ¬© –ë–∞—Ä–ª—ã“õ “õ“±“õ—ã“õ—Ç–∞—Ä “õ–æ—Ä“ì–∞–ª“ì–∞–Ω.
        </div>
        
        <div class="header">
            <h1>üìö –°–µ—Å—Å–∏—è“ì–∞ –¥–∞–π—ã–Ω–¥—ã“õ “õ–æ—Å—ã–º—à–∞—Å—ã</h1>
        </div>
        
        <div class="main-content">
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showSection('create')">–°“±—Ä–∞“õ –∂–∞—Å–∞—É</button>
                <button class="nav-btn" onclick="showSection('study')">–ú”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä–¥—ñ –æ“õ—É</button>
                <button class="nav-btn" onclick="showSection('flashcards')">–ö–∞—Ä—Ç–æ—á–∫–∞–ª–∞—Ä</button>
                <button class="nav-btn" onclick="showSection('quiz')">–í–∏–∫—Ç–æ—Ä–∏–Ω–∞</button>
                <button class="nav-btn" onclick="showSection('test')">–¢–µ—Å—Ç</button>
            </div>
            
            <!-- –°“±—Ä–∞“õ –∂–∞—Å–∞—É –±”©–ª—ñ–º—ñ -->
            <div id="create" class="section active">
                <h2>–°“±—Ä–∞“õ-–∂–∞—É–∞–ø –∂–∞—Å–∞—É</h2>
                
                <!-- –ñ–µ–∫–µ —Å“±—Ä–∞“õ “õ–æ—Å—É -->
                <div class="input-group">
                    <div class="input-column">
                        <label for="question">–°“±—Ä–∞“õ:</label>
                        <textarea id="question" placeholder="–°“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑..."></textarea>
                    </div>
                    <div class="input-column">
                        <label for="answer">–ñ–∞—É–∞–ø:</label>
                        <textarea id="answer" placeholder="–ñ–∞—É–∞–±—ã–Ω –∂–∞–∑—ã“£—ã–∑..."></textarea>
                    </div>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-primary" onclick="addQA()">–¢—ñ—Ä–∫–µ—É</button>
                    <button class="btn btn-warning" onclick="clearInputs()">–¢–∞–∑–∞–ª–∞—É</button>
                </div>
                




                <!-- –ï—Ä–∫—ñ–Ω —Ñ–æ—Ä–º–∞—Ç –µ–Ω–≥—ñ–∑—É -->
                <div style="margin: 30px 0; padding: 20px; background: #e8f5e8; border-radius: 10px;">
                    <h3>–ï—Ä–∫—ñ–Ω —Ñ–æ—Ä–º–∞—Ç –µ–Ω–≥—ñ–∑—É</h3>
                    <p style="color: #666; margin-bottom: 15px;">–°“±—Ä–∞“õ –ø–µ–Ω –∂–∞—É–∞–ø—Ç—ã –±—ñ—Ä –º”ô—Ç—ñ–Ω–¥–µ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑. "–ñ–∞—É–∞–ø:" —Å”©–∑—ñ –∞—Ä“õ—ã–ª—ã –±”©–ª—ñ–Ω–µ–¥—ñ.</p>
                    <div style="margin-bottom: 15px;">
                        <label for="freeFormat" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">–°“±—Ä–∞“õ-–∂–∞—É–∞–ø—Ç–∞—Ä:</label>
                        <textarea id="freeFormat" placeholder="1. –ü–µ–¥–∞–≥–æ–≥–∏–∫–∞–ª—ã“õ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è “±“ì—ã–º—ã–Ω–∞ –∂–∞–ª–ø—ã —Ç“Ø—Å—ñ–Ω—ñ–∫&#10;–ñ–∞—É–∞–ø: –ü–µ–¥–∞–≥–æ–≥–∏–∫–∞–ª—ã“õ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è ‚Äì –æ“õ—É –º–µ–Ω —Ç”ô—Ä–±–∏–µ–Ω—ñ“£ —Ç–∏—ñ–º–¥—ñ–ª—ñ–≥—ñ–Ω –∞—Ä—Ç—Ç—ã—Ä—É“ì–∞ –±–∞“ì—ã—Ç—Ç–∞–ª“ì–∞–Ω...&#10;&#10;2. –ö–µ–ª–µ—Å—ñ —Å“±—Ä–∞“õ&#10;–ñ–∞—É–∞–ø: –ö–µ–ª–µ—Å—ñ –∂–∞—É–∞–ø..." style="width: 100%; height: 200px; padding: 15px; border: 2px solid #e1e5e9; border-radius: 10px; font-size: 14px; resize: vertical;"></textarea>
                    </div>
                    <div class="button-group">
                        <button class="btn btn-success" onclick="addFreeFormatQA()">–ï—Ä–∫—ñ–Ω —Ñ–æ—Ä–º–∞—Ç—Ç—ã —Ç—ñ—Ä–∫–µ—É</button>
                        <button class="btn btn-warning" onclick="clearFreeFormat()">–¢–∞–∑–∞–ª–∞—É</button>
                    </div>
                </div>
                
                <div class="qa-list" id="qaList"></div>
                
                <div class="save-section">
                    <h3>–°–∞“õ—Ç–∞—É</h3>
                    <input type="text" id="setName" placeholder="–¢–æ–ø—Ç–∞–º–∞ –∞—Ç–∞—É—ã–Ω –∂–∞–∑—ã“£—ã–∑...">
                    <div class="button-group">
                        <button class="btn btn-success" onclick="saveSet()">–°–∞“õ—Ç–∞—É</button>
                        <button class="btn btn-primary" onclick="downloadAsWord()">üìÑ Word –∂“Ø–∫—Ç–µ—É</button>
                    </div>
                </div>
                
                <div class="saved-sets" id="savedSets"></div>
            </div>
            
            <!-- –ú”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä–¥—ñ –æ“õ—É –±”©–ª—ñ–º—ñ -->
            <div id="study" class="section">
                <h2>–ú”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä–¥—ñ –æ“õ—É</h2>
                <div class="study-notes" id="studyNotes">
                    <p>–ê–ª–¥—ã–º–µ–Ω —Å“±—Ä–∞“õ-–∂–∞—É–∞–ø —Ç–æ–ø—Ç–∞–º–∞—Å—ã–Ω —Ç–∞“£–¥–∞“£—ã–∑ –Ω–µ–º–µ—Å–µ –∂–∞—Å–∞“£—ã–∑.</p>
                </div>
            </div>
            
            <!-- –ö–∞—Ä—Ç–æ—á–∫–∞–ª–∞—Ä –±”©–ª—ñ–º—ñ -->
            <div id="flashcards" class="section">
                <h2>–ö–∞—Ä—Ç–æ—á–∫–∞–ª–∞—Ä —Ä–µ–∂–∏–º—ñ</h2>
                <div class="study-mode">
                    <div class="progress-bar">
                        <div class="progress-fill" id="flashcardProgress"></div>
                    </div>
                    <div class="card" id="flashcard" onclick="flipCard()">
                        <div class="card-content" id="flashcardContent">
                            –¢–æ–ø—Ç–∞–º–∞ —Ç–∞“£–¥–∞“£—ã–∑
                        </div>
                    </div>
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="prevCard()">‚¨Ö –ê–ª–¥—ã“£“ì—ã</button>
                        <button class="btn btn-primary" onclick="flipCard()">–ê—É–¥–∞—Ä—É</button>
                        <button class="btn btn-primary" onclick="nextCard()">–ö–µ–ª–µ—Å—ñ ‚û°</button>
                    </div>
                    <div class="button-group">
                        <button class="btn btn-warning" onclick="shuffleCards()">–ê—Ä–∞–ª–∞—Å—Ç—ã—Ä—É</button>
                        <button class="btn btn-success" onclick="resetCards()">“ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É</button>
                    </div>
                </div>
            </div>
            
            <!-- –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –±”©–ª—ñ–º—ñ -->
            <div id="quiz" class="section">
                <h2>–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ —Ä–µ–∂–∏–º—ñ</h2>
                <div class="study-mode">
                    <div class="progress-bar">
                        <div class="progress-fill" id="quizProgress"></div>
                    </div>
                    <div class="card">
                        <div class="card-content" id="quizQuestion">
                            –¢–æ–ø—Ç–∞–º–∞ —Ç–∞“£–¥–∞“£—ã–∑
                        </div>
                    </div>
                    <div class="quiz-options" id="quizOptions"></div>
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="nextQuiz()">–ö–µ–ª–µ—Å—ñ —Å“±—Ä–∞“õ</button>
                        <button class="btn btn-success" onclick="finishQuiz()">–ê—è“õ—Ç–∞—É</button>
                    </div>
                </div>
            </div>
            
            <!-- –¢–µ—Å—Ç –±”©–ª—ñ–º—ñ -->
            <div id="test" class="section">
                <h2>–¢–µ—Å—Ç —Ä–µ–∂–∏–º—ñ</h2>
                <div class="study-mode">
                    <div id="testQuestions"></div>
                    <div class="button-group">
                        <button class="btn btn-success" onclick="submitTest()">–¢–µ—Å—Ç—Ç—ñ —Ç–∞–ø—Å—ã—Ä—É</button>
                        <button class="btn btn-warning" onclick="resetTest()">“ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É</button>
                    </div>
                </div>
            </div>
            
            <!-- –ù”ô—Ç–∏–∂–µ–ª–µ—Ä -->
            <div class="results" id="results" style="display: none;">
                <div class="score" id="scoreDisplay">0%</div>
                <p id="scoreText">–ù”ô—Ç–∏–∂–µ</p>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="reviewMistakes()">“ö–∞—Ç–µ–ª–µ—Ä–¥—ñ “õ–∞—Ä–∞—É</button>
                    <button class="btn btn-success" onclick="hideResults()">–ñ–∞–±—É</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentQAs = [];
        let savedSets = JSON.parse(localStorage.getItem('studySets')) || {};
        let currentSet = null;
        
        // –ö–∞—Ä—Ç–æ—á–∫–∞–ª–∞—Ä “Ø—à—ñ–Ω –∞–π–Ω—ã–º–∞–ª—ã–ª–∞—Ä
        let currentCardIndex = 0;
        let isFlipped = false;
        let shuffledCards = [];
        
        // –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ “Ø—à—ñ–Ω –∞–π–Ω—ã–º–∞–ª—ã–ª–∞—Ä
        let currentQuizIndex = 0;
        let quizScore = 0;
        let quizAnswers = [];
        let wrongAnswers = [];
        
        // –¢–µ—Å—Ç “Ø—à—ñ–Ω –∞–π–Ω—ã–º–∞–ª—ã–ª–∞—Ä
        let testAnswers = {};
        
        function showSection(sectionId) {
            // –ë–∞—Ä–ª—ã“õ –±”©–ª—ñ–º–¥–µ—Ä–¥—ñ –∂–∞—Å—ã—Ä—É
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // –ë–∞—Ä–ª—ã“õ –±–∞—Ç—ã—Ä–º–∞–ª–∞—Ä–¥–∞–Ω active –∫–ª–∞—Å—ã–Ω –∞–ª—ã–ø —Ç–∞—Å—Ç–∞—É
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // –¢–∞“£–¥–∞–ª“ì–∞–Ω –±”©–ª—ñ–º–¥—ñ –∫”©—Ä—Å–µ—Ç—É
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
            
            // –ù”ô—Ç–∏–∂–µ–ª–µ—Ä–¥—ñ –∂–∞—Å—ã—Ä—É
            document.getElementById('results').style.display = 'none';
            
            // –ë”©–ª—ñ–º –∞—É—ã—Å“õ–∞–Ω–¥–∞ –º”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä–¥—ñ –∂–∞“£–∞—Ä—Ç—É
            if (sectionId === 'study') {
                updateStudyNotes();
            } else if (sectionId === 'flashcards') {
                initFlashcards();
            } else if (sectionId === 'quiz') {
                initQuiz();
            } else if (sectionId === 'test') {
                initTest();
            }
            
            updateSavedSets();
        }
        
        function addQA() {
            const question = document.getElementById('question').value.trim();
            const answer = document.getElementById('answer').value.trim();
            
            if (!question || !answer) {
                alert('–°“±—Ä–∞“õ –ø–µ–Ω –∂–∞—É–∞–ø—Ç—ã —Ç–æ–ª—Ç—ã—Ä—ã“£—ã–∑!');
                return;
            }
            
            currentQAs.push({ question, answer });
            updateQAList();
            clearInputs();
        }
        
        function clearInputs() {
            document.getElementById('question').value = '';
            document.getElementById('answer').value = '';
        }
        

        
        function addFreeFormatQA() {
            const freeText = document.getElementById('freeFormat').value.trim();
            
            if (!freeText) {
                alert('–ú”ô—Ç—ñ–Ω–¥—ñ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑!');
                return;
            }
            
            // –ú”ô—Ç—ñ–Ω–¥—ñ "–ñ–∞—É–∞–ø:" –∞—Ä“õ—ã–ª—ã –±”©–ª—É
            const sections = freeText.split(/(?=\d+\.)/);
            let addedCount = 0;
            
            sections.forEach(section => {
                section = section.trim();
                if (!section) return;
                
                // "–ñ–∞—É–∞–ø:" —Å”©–∑—ñ–Ω —ñ–∑–¥–µ—É
                const answerIndex = section.search(/–∂–∞—É–∞–ø\s*:/i);
                
                if (answerIndex !== -1) {
                    // –°“±—Ä–∞“õ –±”©–ª—ñ–≥—ñ
                    let question = section.substring(0, answerIndex).trim();
                    // –ñ–∞—É–∞–ø –±”©–ª—ñ–≥—ñ
                    let answer = section.substring(answerIndex).replace(/–∂–∞—É–∞–ø\s*:\s*/i, '').trim();
                    
                    // –°“±—Ä–∞“õ—Ç–∞–Ω –Ω”©–º—ñ—Ä–¥—ñ –∞–ª—ã–ø —Ç–∞—Å—Ç–∞—É
                    question = question.replace(/^\d+\.\s*/, '');
                    
                    if (question && answer) {
                        currentQAs.push({ question, answer });
                        addedCount++;
                    }
                }
            });
            
            if (addedCount > 0) {
                updateQAList();
                clearFreeFormat();
                alert(`${addedCount} —Å“±—Ä–∞“õ-–∂–∞—É–∞–ø —Ç—ñ—Ä–∫–µ–ª–¥—ñ!`);
            } else {
                alert('–î“±—Ä—ã—Å —Ñ–æ—Ä–º–∞—Ç —Ç–∞–±—ã–ª–º–∞–¥—ã! "–ñ–∞—É–∞–ø:" —Å”©–∑—ñ–Ω “õ–æ–ª–¥–∞–Ω—ã“£—ã–∑.');
            }
        }
        
        function clearFreeFormat() {
            document.getElementById('freeFormat').value = '';
        }
        
        function updateQAList() {
            const qaList = document.getElementById('qaList');
            qaList.innerHTML = '';
            
            currentQAs.forEach((qa, index) => {
                const qaItem = document.createElement('div');
                qaItem.className = 'qa-item';
                qaItem.innerHTML = `
                    <div class="question">–°“±—Ä–∞“õ ${index + 1}: ${qa.question}</div>
                    <div class="answer">–ñ–∞—É–∞–ø: ${qa.answer}</div>
                    <button class="btn" style="background: #dc3545; color: white; margin-top: 10px; padding: 5px 10px; font-size: 12px;" onclick="removeQA(${index})">”®—à—ñ—Ä—É</button>
                `;
                qaList.appendChild(qaItem);
            });
        }
        
        function removeQA(index) {
            currentQAs.splice(index, 1);
            updateQAList();
        }
        
        function saveSet() {
            const setName = document.getElementById('setName').value.trim();
            
            if (!setName) {
                alert('–¢–æ–ø—Ç–∞–º–∞ –∞—Ç–∞—É—ã–Ω –∂–∞–∑—ã“£—ã–∑!');
                return;
            }
            
            if (currentQAs.length === 0) {
                alert('–°“±—Ä–∞“õ-–∂–∞—É–∞–ø “õ–æ—Å—ã“£—ã–∑!');
                return;
            }
            
            savedSets[setName] = [...currentQAs];
            localStorage.setItem('studySets', JSON.stringify(savedSets));
            
            document.getElementById('setName').value = '';
            currentQAs = [];
            updateQAList();
            updateSavedSets();
            
            alert('–¢–æ–ø—Ç–∞–º–∞ —Å–∞“õ—Ç–∞–ª–¥—ã!');
        }
        
        function updateSavedSets() {
            const savedSetsDiv = document.getElementById('savedSets');
            savedSetsDiv.innerHTML = '';
            
            Object.keys(savedSets).forEach(setName => {
                const setCard = document.createElement('div');
                setCard.className = 'set-card';
                setCard.innerHTML = `
                    <h3>${setName}</h3>
                    <p>${savedSets[setName].length} —Å“±—Ä–∞“õ</p>
                    <div style="margin-top: 15px;">
                        <button class="btn btn-primary" style="margin-right: 10px; padding: 5px 10px; font-size: 12px;" onclick="loadSet('${setName}')">–ñ“Ø–∫—Ç–µ—É</button>
                        <button class="btn" style="background: #dc3545; color: white; padding: 5px 10px; font-size: 12px;" onclick="deleteSet('${setName}')">”®—à—ñ—Ä—É</button>
                    </div>
                `;
                savedSetsDiv.appendChild(setCard);
            });
        }
        
        function loadSet(setName) {
            currentSet = setName;
            currentQAs = [...savedSets[setName]];
            updateQAList();
            alert(`"${setName}" —Ç–æ–ø—Ç–∞–º–∞—Å—ã –∂“Ø–∫—Ç–µ–ª–¥—ñ!`);
        }
        
        function deleteSet(setName) {
            if (confirm(`"${setName}" —Ç–æ–ø—Ç–∞–º–∞—Å—ã–Ω ”©—à—ñ—Ä—É–¥—ñ —Ä–∞—Å—Ç–∞–π—Å—ã–∑ –±–∞?`)) {
                delete savedSets[setName];
                localStorage.setItem('studySets', JSON.stringify(savedSets));
                updateSavedSets();
            }
        }
        
        function updateStudyNotes() {
            const studyNotes = document.getElementById('studyNotes');
            
            if (!currentSet || currentQAs.length === 0) {
                studyNotes.innerHTML = '<p>–ê–ª–¥—ã–º–µ–Ω —Å“±—Ä–∞“õ-–∂–∞—É–∞–ø —Ç–æ–ø—Ç–∞–º–∞—Å—ã–Ω —Ç–∞“£–¥–∞“£—ã–∑ –Ω–µ–º–µ—Å–µ –∂–∞—Å–∞“£—ã–∑.</p>';
                return;
            }
            
            studyNotes.innerHTML = `<h3>üìñ ${currentSet} - –ö–æ–Ω—Å–ø–µ–∫—Ç</h3>`;
            
            currentQAs.forEach((qa, index) => {
                const noteItem = document.createElement('div');
                noteItem.className = 'note-item';
                noteItem.innerHTML = `
                    <div class="note-title">${index + 1}. ${qa.question}</div>
                    <div class="note-content">${qa.answer}</div>
                `;
                studyNotes.appendChild(noteItem);
            });
        }
        
        // –ö–∞—Ä—Ç–æ—á–∫–∞–ª–∞—Ä —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã
        function initFlashcards() {
            if (currentQAs.length === 0) {
                document.getElementById('flashcardContent').textContent = '–¢–æ–ø—Ç–∞–º–∞ —Ç–∞“£–¥–∞“£—ã–∑';
                return;
            }
            
            shuffledCards = [...currentQAs];
            currentCardIndex = 0;
            isFlipped = false;
            showCurrentCard();
            updateFlashcardProgress();
        }
        
        function showCurrentCard() {
            if (shuffledCards.length === 0) return;
            
            const card = shuffledCards[currentCardIndex];
            const content = isFlipped ? card.answer : card.question;
            document.getElementById('flashcardContent').textContent = content;
        }
        
        function flipCard() {
            if (shuffledCards.length === 0) return;
            isFlipped = !isFlipped;
            showCurrentCard();
        }
        
        function nextCard() {
            if (shuffledCards.length === 0) return;
            currentCardIndex = (currentCardIndex + 1) % shuffledCards.length;
            isFlipped = false;
            showCurrentCard();
            updateFlashcardProgress();
        }
        
        function prevCard() {
            if (shuffledCards.length === 0) return;
            currentCardIndex = currentCardIndex === 0 ? shuffledCards.length - 1 : currentCardIndex - 1;
            isFlipped = false;
            showCurrentCard();
            updateFlashcardProgress();
        }
        
        function shuffleCards() {
            if (shuffledCards.length === 0) return;
            for (let i = shuffledCards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledCards[i], shuffledCards[j]] = [shuffledCards[j], shuffledCards[i]];
            }
            currentCardIndex = 0;
            isFlipped = false;
            showCurrentCard();
            updateFlashcardProgress();
        }
        
        function resetCards() {
            initFlashcards();
        }
        
        function updateFlashcardProgress() {
            if (shuffledCards.length === 0) return;
            const progress = ((currentCardIndex + 1) / shuffledCards.length) * 100;
            document.getElementById('flashcardProgress').style.width = progress + '%';
        }
        
        // –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã
        function initQuiz() {
            if (currentQAs.length === 0) {
                document.getElementById('quizQuestion').textContent = '–¢–æ–ø—Ç–∞–º–∞ —Ç–∞“£–¥–∞“£—ã–∑';
                document.getElementById('quizOptions').innerHTML = '';
                return;
            }
            
            currentQuizIndex = 0;
            quizScore = 0;
            quizAnswers = [];
            wrongAnswers = [];
            showQuizQuestion();
        }
        
        function showQuizQuestion() {
            if (currentQuizIndex >= currentQAs.length) {
                finishQuiz();
                return;
            }
            
            const currentQA = currentQAs[currentQuizIndex];
            document.getElementById('quizQuestion').textContent = currentQA.question;
            
            // –ñ–∞—É–∞–ø –Ω“±—Å“õ–∞–ª–∞—Ä—ã–Ω –∂–∞—Å–∞—É
            const options = [currentQA.answer];
            
            // “ö–∞—Ç–µ –∂–∞—É–∞–ø—Ç–∞—Ä–¥—ã “õ–æ—Å—É
            const otherAnswers = currentQAs.filter((_, index) => index !== currentQuizIndex)
                .map(qa => qa.answer)
                .sort(() => Math.random() - 0.5)
                .slice(0, 3);
            
            options.push(...otherAnswers);
            options.sort(() => Math.random() - 0.5);
            
            const optionsDiv = document.getElementById('quizOptions');
            optionsDiv.innerHTML = '';
            
            options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'quiz-option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => selectQuizOption(option, currentQA.answer, optionDiv);
                optionsDiv.appendChild(optionDiv);
            });
            
            updateQuizProgress();
        }
        
        function selectQuizOption(selected, correct, element) {
            // –ë–∞—Ä–ª—ã“õ –æ–ø—Ü–∏—è–ª–∞—Ä–¥—ã –±–ª–æ–∫—Ç–∞—É
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.style.pointerEvents = 'none';
                if (opt.textContent === correct) {
                    opt.classList.add('correct');
                } else if (opt === element && selected !== correct) {
                    opt.classList.add('incorrect');
                }
            });
            
            if (selected === correct) {
                quizScore++;
            } else {
                wrongAnswers.push({
                    question: currentQAs[currentQuizIndex].question,
                    correct: correct,
                    selected: selected
                });
            }
            
            quizAnswers.push({
                question: currentQAs[currentQuizIndex].question,
                selected: selected,
                correct: correct,
                isCorrect: selected === correct
            });
        }
        
        function nextQuiz() {
            currentQuizIndex++;
            showQuizQuestion();
        }
        
        function finishQuiz() {
            showResults(quizScore, currentQAs.length, '–≤–∏–∫—Ç–æ—Ä–∏–Ω–∞');
        }
        
        function updateQuizProgress() {
            const progress = (currentQuizIndex / currentQAs.length) * 100;
            document.getElementById('quizProgress').style.width = progress + '%';
        }
        
        // –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã
        function initTest() {
            if (currentQAs.length === 0) {
                document.getElementById('testQuestions').innerHTML = '<p>–¢–æ–ø—Ç–∞–º–∞ —Ç–∞“£–¥–∞“£—ã–∑</p>';
                return;
            }
            
            testAnswers = {};
            const testDiv = document.getElementById('testQuestions');
            testDiv.innerHTML = '';
            
            currentQAs.forEach((qa, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'note-item';
                questionDiv.innerHTML = `
                    <div class="note-title">${index + 1}. ${qa.question}</div>
                    <textarea id="testAnswer${index}" placeholder="–ñ–∞—É–∞–±—ã“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑..." style="width: 100%; height: 80px; margin-top: 10px; padding: 10px; border: 2px solid #e1e5e9; border-radius: 8px;"></textarea>
                `;
                testDiv.appendChild(questionDiv);
            });
        }
        
        function submitTest() {
            if (currentQAs.length === 0) return;
            
            let correctCount = 0;
            wrongAnswers = [];
            
            currentQAs.forEach((qa, index) => {
                const userAnswer = document.getElementById(`testAnswer${index}`).value.trim().toLowerCase();
                const correctAnswer = qa.answer.toLowerCase();
                
                if (userAnswer.includes(correctAnswer) || correctAnswer.includes(userAnswer)) {
                    correctCount++;
                } else {
                    wrongAnswers.push({
                        question: qa.question,
                        correct: qa.answer,
                        selected: document.getElementById(`testAnswer${index}`).value.trim()
                    });
                }
            });
            
            showResults(correctCount, currentQAs.length, '—Ç–µ—Å—Ç');
        }
        
        function resetTest() {
            initTest();
        }
        
        // –ù”ô—Ç–∏–∂–µ–ª–µ—Ä —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã
        function showResults(correct, total, mode) {
            const percentage = Math.round((correct / total) * 100);
            
            document.getElementById('scoreDisplay').textContent = percentage + '%';
            document.getElementById('scoreText').textContent = 
                `${mode} –Ω”ô—Ç–∏–∂–µ—Å—ñ: ${correct}/${total} –¥“±—Ä—ã—Å –∂–∞—É–∞–ø`;
            
            document.getElementById('results').style.display = 'block';
            
            // –ù”ô—Ç–∏–∂–µ–≥–µ “õ–∞—Ä–∞–π —Ç“Ø—Å ”©–∑–≥–µ—Ä—Ç—É
            const scoreElement = document.getElementById('scoreDisplay');
            if (percentage >= 80) {
                scoreElement.style.color = '#28a745';
            } else if (percentage >= 60) {
                scoreElement.style.color = '#ffc107';
            } else {
                scoreElement.style.color = '#dc3545';
            }
        }
        
        function reviewMistakes() {
            if (wrongAnswers.length === 0) {
                alert('“ö–∞—Ç–µ–ª–µ—Ä –∂–æ“õ! ”®—Ç–µ –∂–∞“õ—Å—ã –Ω”ô—Ç–∏–∂–µ!');
                return;
            }
            
            let mistakesText = '“ö–∞—Ç–µ –∂–∞—É–∞–ø—Ç–∞—Ä:\n\n';
            wrongAnswers.forEach((mistake, index) => {
                mistakesText += `${index + 1}. ${mistake.question}\n`;
                mistakesText += `–î“±—Ä—ã—Å –∂–∞—É–∞–ø: ${mistake.correct}\n`;
                mistakesText += `–°—ñ–∑–¥—ñ“£ –∂–∞—É–∞–±—ã“£—ã–∑: ${mistake.selected}\n\n`;
            });
            
            alert(mistakesText);
        }
        
        function hideResults() {
            document.getElementById('results').style.display = 'none';
        }
        

        
        // Word –∂“Ø–∫—Ç–µ—É —Ñ—É–Ω–∫—Ü–∏—è—Å—ã
        function downloadAsWord() {
            if (currentQAs.length === 0) {
                alert('–ê–ª–¥—ã–º–µ–Ω —Å“±—Ä–∞“õ-–∂–∞—É–∞–ø “õ–æ—Å—ã“£—ã–∑!');
                return;
            }
            
            const setName = document.getElementById('setName').value.trim() || '–°“±—Ä–∞“õ-–∂–∞—É–∞–ø—Ç–∞—Ä';
            
            // Word –¥–æ–∫—É–º–µ–Ω—Ç—ñ “Ø—à—ñ–Ω —Ç–æ–ª—ã“õ HTML “õ“±—Ä—ã–ª—ã–º—ã
            const wordContent = `<!DOCTYPE html>
<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
<head>
    <meta charset='utf-8'>
    <title>${setName}</title>
    <!--[if gte mso 9]>
    <xml>
        <w:WordDocument>
            <w:View>Print</w:View>
            <w:Zoom>90</w:Zoom>
            <w:DoNotPromptForConvert/>
            <w:DoNotShowInsertionsAndDeletions/>
        </w:WordDocument>
    </xml>
    <![endif]-->
    <style>
        @page {
            margin: 2.5cm;
        }
        body {
            font-family: 'Times New Roman', serif;
            font-size: 12pt;
            line-height: 1.5;
            margin: 0;
            padding: 0;
        }
        h1 {
            font-size: 18pt;
            font-weight: bold;
            text-align: center;
            margin-bottom: 30px;
            color: #000;
            page-break-after: avoid;
        }
        .qa-item {
            margin-bottom: 20px;
            page-break-inside: avoid;
        }
        .question {
            font-weight: bold;
            font-size: 12pt;
            margin-bottom: 8px;
            color: #000;
        }
        .answer {
            font-size: 12pt;
            margin-left: 20px;
            margin-bottom: 15px;
            text-align: justify;
            color: #000;
        }
        .footer {
            margin-top: 40px;
            text-align: center;
            font-size: 10pt;
            color: #666;
            border-top: 1px solid #ccc;
            padding-top: 10px;
        }
        .page-break {
            page-break-before: always;
        }
    </style>
</head>
<body>
    <h1>${setName}</h1>
    
    ${currentQAs.map((qa, index) => `
    <div class="qa-item">
        <div class="question">${index + 1}. ${qa.question}</div>
        <div class="answer"><strong>–ñ–∞—É–∞–ø:</strong> ${qa.answer}</div>
    </div>
    `).join('')}
    
    <div class="footer">
        <p>–ñ–∞—Å–∞–ª“ì–∞–Ω –∫“Ø–Ω—ñ: ${new Date().toLocaleDateString('kk-KZ', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        })}</p>
        <p>–ë–∞—Ä–ª—ã“ì—ã: ${currentQAs.length} —Å“±—Ä–∞“õ-–∂–∞—É–∞–ø</p>
    </div>
</body>
</html>`;
            
            // Word “Ø—à—ñ–Ω –¥“±—Ä—ã—Å MIME —Ç–∏–ø—ñ
            const blob = new Blob(['\ufeff', wordContent], {
                type: 'application/msword'
            });
            
            // –§–∞–π–ª–¥—ã –∂“Ø–∫—Ç–µ—É
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `${setName}.doc`;
            link.style.display = 'none';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // –ñ–∞–¥—ã–Ω—ã —Ç–∞–∑–∞–ª–∞—É
            setTimeout(() => {
                URL.revokeObjectURL(url);
            }, 100);
            
            alert(`"${setName}.doc" —Ñ–∞–π–ª—ã —Å”ô—Ç—Ç—ñ –∂“Ø–∫—Ç–µ–ª–¥—ñ! Microsoft Word –Ω–µ–º–µ—Å–µ LibreOffice –∞—Ä“õ—ã–ª—ã –∞—à—É“ì–∞ –±–æ–ª–∞–¥—ã.`);
        }
        
        // –ë–∞—Å—Ç–∞–ø“õ—ã –∂“Ø–∫—Ç–µ—É
        window.onload = function() {
            updateSavedSets();
        };
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98558264201fecf1',t:'MTc1ODkxODUyNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>


