<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jarvis - –í–∏—Ä—Ç—É–∞–ª–¥—ã –ö”©–º–µ–∫—à—ñ</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 300px;
            background: rgba(26, 26, 46, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            overflow-y: auto;
        }

        .main-chat {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .header {
            background: rgba(22, 33, 62, 0.9);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }

        .jarvis-title {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0;
        }

        .chat-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            max-width: 80%;
            animation: fadeIn 0.3s ease-in;
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .avatar.jarvis {
            background: linear-gradient(45deg, #00d4ff, #0099cc);
        }

        .avatar.user {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
        }

        .message-content {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px 16px;
            border-radius: 18px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .message.user .message-content {
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        .input-area {
            padding: 20px;
            background: rgba(22, 33, 62, 0.9);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .input-container {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .message-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 12px 20px;
            color: white;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .message-input:focus {
            border-color: #00d4ff;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .message-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .btn {
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .btn:active {
            transform: scale(0.95);
        }

        .stats-section {
            margin-bottom: 30px;
        }

        .stats-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #00d4ff;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            border-radius: 10px;
            margin-bottom: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .controls-section {
            margin-bottom: 30px;
        }

        .control-btn {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: #00d4ff;
        }

        .voice-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .voice-btn {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .voice-btn:hover {
            background: rgba(0, 212, 255, 0.2);
        }

        .voice-btn.active {
            background: linear-gradient(45deg, #00d4ff, #0099cc);
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.7);
            font-style: italic;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: #00d4ff;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 250px;
            }
            
            .message {
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="stats-section">
                <div class="stats-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                <div class="stat-item">
                    <div>–°“±—Ä–∞“õ—Ç–∞—Ä: <span id="questionCount">0</span></div>
                </div>
                <div class="stat-item">
                    <div>–ñ–∞—É–∞–ø—Ç–∞—Ä: <span id="answerCount">0</span></div>
                </div>
                <div class="stat-item">
                    <div>–¢–∞–Ω—ã–º–∞–ª —Ç–∞“õ—ã—Ä—ã–ø: <span id="popularTopic">-</span></div>
                </div>
            </div>

            <div class="controls-section">
                <div class="stats-title">‚öôÔ∏è –ë–∞—Å“õ–∞—Ä—É</div>
                <button class="control-btn" onclick="clearChat()">üí¨ –ß–∞—Ç—Ç—ã —Ç–∞–∑–∞–ª–∞—É</button>
                <button class="control-btn" onclick="toggleLanguage()">üåê –¢—ñ–ª: <span id="currentLang">“ö–∞–∑–∞“õ—à–∞</span></button>
                <button class="control-btn" onclick="toggleTheme()">üé® –¢–∞“õ—ã—Ä—ã–ø</button>
                
                <div class="voice-controls">
                    <button class="voice-btn" id="micBtn" onclick="toggleSpeechRecognition()">üé§ –ú–∏–∫—Ä–æ—Ñ–æ–Ω</button>
                    <button class="voice-btn" onclick="toggleTTS()">üîä –î–∞—É—ã—Å: <span id="ttsStatus">”®—à—ñ—Ä—É–ª—ñ</span></button>
                </div>
            </div>
        </div>

        <div class="main-chat">
            <div class="header">
                <h1 class="jarvis-title">JARVIS</h1>
                <p style="margin: 5px 0 0 0; opacity: 0.8;">–í–∏—Ä—Ç—É–∞–ª–¥—ã –ö”©–º–µ–∫—à—ñ</p>
            </div>

            <div class="chat-area" id="chatArea">
                <div class="message">
                    <div class="avatar jarvis">ü§ñ</div>
                    <div class="message-content">
                        –°”ô–ª–µ–º! –ú–µ–Ω Jarvis. –°—ñ–∑–≥–µ “õ–∞–ª–∞–π –∫”©–º–µ–∫—Ç–µ—Å–µ –∞–ª–∞–º—ã–Ω? –ú–µ–Ω –∞—É–∞ —Ä–∞–π—ã, —É–∞“õ—ã—Ç, –µ—Å–µ–ø—Ç–µ—É–ª–µ—Ä –∂”ô–Ω–µ –∫”©–ø—Ç–µ–≥–µ–Ω –±–∞—Å“õ–∞ —Å“±—Ä–∞“õ—Ç–∞—Ä“ì–∞ –∂–∞—É–∞–ø –±–µ—Ä–µ –∞–ª–∞–º—ã–Ω.
                    </div>
                </div>
            </div>

            <div class="typing-indicator" id="typingIndicator">
                <div class="avatar jarvis">ü§ñ</div>
                <div>
                    Jarvis –∂–∞–∑—ã–ø –∂–∞—Ç—ã—Ä...
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            </div>

            <div class="input-area">
                <div class="input-container">
                    <input type="text" class="message-input" id="messageInput" placeholder="–•–∞–±–∞—Ä–ª–∞–º–∞“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑..." onkeypress="handleKeyPress(event)">
                    <button class="btn" onclick="sendMessage()">üì§</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentLanguage = 'kk'; // kk - “õ–∞–∑–∞“õ—à–∞, ru - —Ä—É—Å—Å–∫–∏–π
        let questionCount = 0;
        let answerCount = 0;
        let topicStats = {};
        let ttsEnabled = false;
        let recognition = null;
        let isListening = false;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            initializeSpeechRecognition();
            loadStats();
        });

        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        function updateStats() {
            document.getElementById('questionCount').textContent = questionCount;
            document.getElementById('answerCount').textContent = answerCount;
            
            const popularTopic = Object.keys(topicStats).reduce((a, b) => 
                topicStats[a] > topicStats[b] ? a : b, '–ñ–∞–ª–ø—ã');
            document.getElementById('popularTopic').textContent = popularTopic;
            
            saveStats();
        }

        function saveStats() {
            localStorage.setItem('jarvisStats', JSON.stringify({
                questionCount,
                answerCount,
                topicStats
            }));
        }

        function loadStats() {
            const saved = localStorage.getItem('jarvisStats');
            if (saved) {
                const stats = JSON.parse(saved);
                questionCount = stats.questionCount || 0;
                answerCount = stats.answerCount || 0;
                topicStats = stats.topicStats || {};
                updateStats();
            }
        }

        // –•–∞–±–∞—Ä–ª–∞–º–∞ –∂—ñ–±–µ—Ä—É
        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (message === '') return;
            
            addMessage(message, 'user');
            input.value = '';
            
            questionCount++;
            updateStats();
            
            // Jarvis –∂–∞—É–∞–±—ã–Ω –∫”©—Ä—Å–µ—Ç—É
            showTypingIndicator();
            setTimeout(() => {
                const response = generateResponse(message);
                hideTypingIndicator();
                addMessage(response, 'jarvis');
                
                answerCount++;
                updateStats();
                
                // TTS
                if (ttsEnabled) {
                    speakText(response);
                }
            }, 1000 + Math.random() * 1000);
        }

        function addMessage(text, sender) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const avatar = document.createElement('div');
            avatar.className = `avatar ${sender}`;
            avatar.textContent = sender === 'jarvis' ? 'ü§ñ' : 'üë§';
            
            const content = document.createElement('div');
            content.className = 'message-content';
            content.textContent = text;
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(content);
            chatArea.appendChild(messageDiv);
            
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function showTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'flex';
        }

        function hideTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'none';
        }

        // –ñ–∞—É–∞–ø –≥–µ–Ω–µ—Ä–∞—Ü–∏—è—Å—ã
        function generateResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // –¢–∞“õ—ã—Ä—ã–ø—Ç—ã –∞–Ω—ã“õ—Ç–∞—É
            let topic = '–ñ–∞–ª–ø—ã';
            if (lowerMessage.includes('–∞—É–∞ —Ä–∞–π—ã') || lowerMessage.includes('–ø–æ–≥–æ–¥–∞')) {
                topic = '–ê—É–∞ —Ä–∞–π—ã';
            } else if (lowerMessage.includes('—É–∞“õ—ã—Ç') || lowerMessage.includes('–≤—Ä–µ–º—è')) {
                topic = '–£–∞“õ—ã—Ç';
            } else if (lowerMessage.includes('–µ—Å–µ–ø—Ç–µ') || lowerMessage.includes('–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞') || lowerMessage.includes('–≤—ã—á–∏—Å–ª–∏')) {
                topic = '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞';
            } else if (lowerMessage.includes('–º—É–∑—ã–∫–∞') || lowerMessage.includes('–º“±–∑—ã–∫–∞') || lowerMessage.includes('youtube')) {
                topic = '–ú—É–ª—å—Ç–∏–º–µ–¥–∏–∞';
            }
            
            topicStats[topic] = (topicStats[topic] || 0) + 1;

            // –ñ–∞—É–∞–ø—Ç–∞—Ä
            if (currentLanguage === 'kk') {
                return generateKazakhResponse(lowerMessage);
            } else {
                return generateRussianResponse(lowerMessage);
            }
        }

        function generateKazakhResponse(message) {
            // –°”ô–ª–µ–º–¥–µ—Å—É
            if (message.includes('—Å”ô–ª–µ–º') || message.includes('—Å–∞–ª–∞–º')) {
                return '–°”ô–ª–µ–º! –ú–µ–Ω Jarvis, —Å—ñ–∑–¥—ñ“£ –≤–∏—Ä—Ç—É–∞–ª–¥—ã –∫”©–º–µ–∫—à—ñ“£—ñ–∑. –°—ñ–∑–≥–µ “õ–∞–ª–∞–π –∫”©–º–µ–∫—Ç–µ—Å–µ –∞–ª–∞–º—ã–Ω?';
            }
            
            // –ê—É–∞ —Ä–∞–π—ã
            if (message.includes('–∞—É–∞ —Ä–∞–π—ã')) {
                const weather = ['–ö“Ø–Ω –∞—à—ã“õ, +22¬∞C', '–ë“±–ª—Ç—Ç—ã, +18¬∞C', '–ñ–∞“£–±—ã—Ä–ª—ã, +15¬∞C', '“ö–∞—Ä–ª—ã, -5¬∞C'];
                const randomWeather = weather[Math.floor(Math.random() * weather.length)];
                return `–ë“Ø–≥—ñ–Ω–≥—ñ –∞—É–∞ —Ä–∞–π—ã: ${randomWeather}. –ö–∏—ñ–º —Ç–∞“£–¥–∞—É–¥–∞ –º“±“õ–∏—è—Ç –±–æ–ª—ã“£—ã–∑!`;
            }
            
            // –£–∞“õ—ã—Ç
            if (message.includes('—É–∞“õ—ã—Ç') || message.includes('—Å–∞“ì–∞—Ç')) {
                const now = new Date();
                const time = now.toLocaleTimeString('kk-KZ');
                const date = now.toLocaleDateString('kk-KZ');
                return `“ö–∞–∑—ñ—Ä–≥—ñ —É–∞“õ—ã—Ç: ${time}, –∫“Ø–Ω—ñ: ${date}. –£–∞“õ—ã—Ç—Ç—ã —Ç–∏—ñ–º–¥—ñ –ø–∞–π–¥–∞–ª–∞–Ω—ã“£—ã–∑!`;
            }
            
            // –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞
            if (message.includes('–µ—Å–µ–ø—Ç–µ') || message.includes('+') || message.includes('-') || message.includes('*') || message.includes('/')) {
                try {
                    // “ö–∞—Ä–∞–ø–∞–π—ã–º –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞–ª—ã“õ ”©—Ä–Ω–µ–∫—Ç–µ—Ä–¥—ñ –µ—Å–µ–ø—Ç–µ—É
                    const mathExpression = message.match(/[\d+\-*/\s().]+/);
                    if (mathExpression) {
                        const result = eval(mathExpression[0]);
                        return `–ù”ô—Ç–∏–∂–µ: ${result}. –ë–∞—Å“õ–∞ –µ—Å–µ–ø—Ç–µ—Ä –∫–µ—Ä–µ–∫ –±–æ–ª—Å–∞, —Å“±—Ä–∞“£—ã–∑!`;
                    }
                } catch (e) {
                    return '–ö–µ—à—ñ—Ä—ñ“£—ñ–∑, –±“±–ª –µ—Å–µ–ø—Ç—ñ —à—ã“ì–∞—Ä–∞ –∞–ª–º–∞–¥—ã–º. –ë–∞—Å“õ–∞—à–∞ –∂–∞–∑—ã–ø –∫”©—Ä—ñ“£—ñ–∑.';
                }
            }
            
            // –ú—É–∑—ã–∫–∞/YouTube
            if (message.includes('–º“±–∑—ã–∫–∞') || message.includes('”ô–Ω') || message.includes('youtube')) {
                return '–ú“±–∑—ã–∫–∞ —ñ–∑–¥–µ—É “Ø—à—ñ–Ω YouTube-“õ–∞ ”©—Ç—ñ“£—ñ–∑: https://youtube.com. “ö–∞–Ω–¥–∞–π ”ô–Ω —ñ–∑–¥–µ–ø –∂–∞—Ç—ã—Ä—Å—ã–∑?';
            }
            
            // –ö”©–º–µ–∫
            if (message.includes('–∫”©–º–µ–∫') || message.includes('–Ω–µ —ñ—Å—Ç–µ–π –∞–ª–∞—Å—ã“£')) {
                return '–ú–µ–Ω –º—ã–Ω–∞–Ω—ã —ñ—Å—Ç–µ–π –∞–ª–∞–º—ã–Ω:\n‚Ä¢ –ê—É–∞ —Ä–∞–π—ã–Ω –∞–π—Ç—É\n‚Ä¢ –£–∞“õ—ã—Ç –ø–µ–Ω –∫“Ø–Ω–¥—ñ –∫”©—Ä—Å–µ—Ç—É\n‚Ä¢ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞–ª—ã“õ –µ—Å–µ–ø—Ç–µ—Ä\n‚Ä¢ –ú“±–∑—ã–∫–∞ —ñ–∑–¥–µ—É\n‚Ä¢ –ñ–∞–ª–ø—ã —Å“±—Ä–∞“õ—Ç–∞—Ä“ì–∞ –∂–∞—É–∞–ø –±–µ—Ä—É\n\n–ë–∞—Å“õ–∞ –Ω–µ –∫–µ—Ä–µ–∫?';
            }
            
            // –ñ–∞–ª–ø—ã –∂–∞—É–∞–ø—Ç–∞—Ä
            const generalResponses = [
                '“ö—ã–∑—ã“õ—Ç—ã —Å“±—Ä–∞“õ! –ë“±–ª —Ç—É—Ä–∞–ª—ã –∫”©–±—ñ—Ä–µ–∫ –æ–π–ª–∞–Ω—ã–ø –∫”©—Ä–µ–π—ñ–Ω.',
                '–ú–µ–Ω —Å—ñ–∑–≥–µ –∫”©–º–µ–∫—Ç–µ—Å—É–≥–µ —Ç—ã—Ä—ã—Å–∞–º—ã–Ω. –ù–∞“õ—Ç—ã—Ä–∞“õ —Å“±—Ä–∞–π –∞–ª–∞—Å—ã–∑ –±–∞?',
                '–ë“±–ª —Ç–∞“õ—ã—Ä—ã–ø –±–æ–π—ã–Ω—à–∞ —Ç–æ–ª—ã“õ –∞“õ–ø–∞—Ä–∞—Ç –±–µ—Ä—É “Ø—à—ñ–Ω –∫”©–±—ñ—Ä–µ–∫ –º”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä –∫–µ—Ä–µ–∫.',
                '–°—ñ–∑–¥—ñ“£ —Å“±—Ä–∞“ì—ã“£—ã–∑ –º–∞“£—ã–∑–¥—ã. –ë–∞—Å“õ–∞ —Ç”ô—Å—ñ–ª–º–µ–Ω —Å“±—Ä–∞–ø –∫”©—Ä—ñ“£—ñ–∑.'
            ];
            
            return generalResponses[Math.floor(Math.random() * generalResponses.length)];
        }

        function generateRussianResponse(message) {
            // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
            if (message.includes('–ø—Ä–∏–≤–µ—Ç') || message.includes('–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π')) {
                return '–ü—Ä–∏–≤–µ—Ç! –Ø Jarvis, –≤–∞—à –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫. –ö–∞–∫ –º–æ–≥—É –ø–æ–º–æ—á—å?';
            }
            
            // –ü–æ–≥–æ–¥–∞
            if (message.includes('–ø–æ–≥–æ–¥–∞')) {
                const weather = ['–°–æ–ª–Ω–µ—á–Ω–æ, +22¬∞C', '–û–±–ª–∞—á–Ω–æ, +18¬∞C', '–î–æ–∂–¥–ª–∏–≤–æ, +15¬∞C', '–°–Ω–µ–∂–Ω–æ, -5¬∞C'];
                const randomWeather = weather[Math.floor(Math.random() * weather.length)];
                return `–°–µ–≥–æ–¥–Ω—è—à–Ω—è—è –ø–æ–≥–æ–¥–∞: ${randomWeather}. –û–¥–µ–≤–∞–π—Ç–µ—Å—å –ø–æ –ø–æ–≥–æ–¥–µ!`;
            }
            
            // –í—Ä–µ–º—è
            if (message.includes('–≤—Ä–µ–º—è') || message.includes('—á–∞—Å')) {
                const now = new Date();
                const time = now.toLocaleTimeString('ru-RU');
                const date = now.toLocaleDateString('ru-RU');
                return `–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è: ${time}, –¥–∞—Ç–∞: ${date}. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Ä–µ–º—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ!`;
            }
            
            // –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞
            if (message.includes('–≤—ã—á–∏—Å–ª–∏') || message.includes('–ø–æ—Å—á–∏—Ç–∞–π') || message.includes('+') || message.includes('-')) {
                try {
                    const mathExpression = message.match(/[\d+\-*/\s().]+/);
                    if (mathExpression) {
                        const result = eval(mathExpression[0]);
                        return `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${result}. –ù—É–∂–Ω—ã –¥—Ä—É–≥–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è?`;
                    }
                } catch (e) {
                    return '–ò–∑–≤–∏–Ω–∏—Ç–µ, –Ω–µ —Å–º–æ–≥ —Ä–µ—à–∏—Ç—å —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ-–¥—Ä—É–≥–æ–º—É.';
                }
            }
            
            // –ú—É–∑—ã–∫–∞
            if (message.includes('–º—É–∑—ã–∫–∞') || message.includes('–ø–µ—Å–Ω—è') || message.includes('youtube')) {
                return '–î–ª—è –ø–æ–∏—Å–∫–∞ –º—É–∑—ã–∫–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ YouTube: https://youtube.com. –ö–∞–∫—É—é –ø–µ—Å–Ω—é –∏—â–µ—Ç–µ?';
            }
            
            // –ü–æ–º–æ—â—å
            if (message.includes('–ø–æ–º–æ—â—å') || message.includes('—á—Ç–æ —É–º–µ–µ—à—å')) {
                return '–Ø —É–º–µ—é:\n‚Ä¢ –°–æ–æ–±—â–∞—Ç—å –ø–æ–≥–æ–¥—É\n‚Ä¢ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ä–µ–º—è –∏ –¥–∞—Ç—É\n‚Ä¢ –†–µ—à–∞—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã\n‚Ä¢ –ò—Å–∫–∞—Ç—å –º—É–∑—ã–∫—É\n‚Ä¢ –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –æ–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã\n\n–ß—Ç–æ –µ—â–µ –Ω—É–∂–Ω–æ?';
            }
            
            const generalResponses = [
                '–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–π—Ç–µ –ø–æ–¥—É–º–∞—Ç—å –æ–± —ç—Ç–æ–º.',
                '–Ø –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –ø–æ–º–æ—á—å. –ú–æ–∂–µ—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ–µ?',
                '–î–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —ç—Ç–æ–π —Ç–µ–º–µ.',
                '–í–∞—à –≤–æ–ø—Ä–æ—Å –≤–∞–∂–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å –ø–æ-–¥—Ä—É–≥–æ–º—É.'
            ];
            
            return generalResponses[Math.floor(Math.random() * generalResponses.length)];
        }

        // –ë–∞—Å“õ–∞—Ä—É —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä—ã
        function clearChat() {
            const chatArea = document.getElementById('chatArea');
            chatArea.innerHTML = `
                <div class="message">
                    <div class="avatar jarvis">ü§ñ</div>
                    <div class="message-content">
                        ${currentLanguage === 'kk' ? 
                            '–ß–∞—Ç —Ç–∞–∑–∞–ª–∞–Ω–¥—ã. –ñ–∞“£–∞ —Å“±—Ä–∞“õ—Ç–∞—Ä—ã“£—ã–∑–¥—ã –∫“Ø—Ç–µ–º—ñ–Ω!' : 
                            '–ß–∞—Ç –æ—á–∏—â–µ–Ω. –ñ–¥—É –≤–∞—à–∏—Ö –Ω–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤!'}
                    </div>
                </div>
            `;
        }

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'kk' ? 'ru' : 'kk';
            document.getElementById('currentLang').textContent = 
                currentLanguage === 'kk' ? '“ö–∞–∑–∞“õ—à–∞' : '–†—É—Å—Å–∫–∏–π';
            
            // –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—Ç—ñ –∂–∞“£–∞—Ä—Ç—É
            updateInterface();
        }

        function updateInterface() {
            const input = document.getElementById('messageInput');
            input.placeholder = currentLanguage === 'kk' ? 
                '–•–∞–±–∞—Ä–ª–∞–º–∞“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑...' : 
                '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...';
        }

        function toggleTheme() {
            // “ö–æ—Å—ã–º—à–∞ —Ç–∞“õ—ã—Ä—ã–ø—Ç–∞—Ä “Ø—à—ñ–Ω
            alert(currentLanguage === 'kk' ? 
                '–¢–∞“õ—ã—Ä—ã–ø ”©–∑–≥–µ—Ä—Ç—É —Ñ—É–Ω–∫—Ü–∏—è—Å—ã –¥–∞–º—É–¥–∞!' : 
                '–§—É–Ω–∫—Ü–∏—è —Å–º–µ–Ω—ã —Ç–µ–º—ã –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!');
        }

        // –î–∞—É—ã—Å—Ç—ã“õ —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä
        function initializeSpeechRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = currentLanguage === 'kk' ? 'kk-KZ' : 'ru-RU';
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('messageInput').value = transcript;
                    sendMessage();
                };
                
                recognition.onerror = function(event) {
                    console.log('Speech recognition error:', event.error);
                    isListening = false;
                    updateMicButton();
                };
                
                recognition.onend = function() {
                    isListening = false;
                    updateMicButton();
                };
            }
        }

        function toggleSpeechRecognition() {
            if (!recognition) {
                alert(currentLanguage === 'kk' ? 
                    '–î–∞—É—ã—Å —Ç–∞–Ω–∞—É “õ–æ–ª–¥–∞—É –∫”©—Ä—Å–µ—Ç—ñ–ª–º–µ–π–¥—ñ!' : 
                    '–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è!');
                return;
            }
            
            if (isListening) {
                recognition.stop();
                isListening = false;
            } else {
                recognition.lang = currentLanguage === 'kk' ? 'kk-KZ' : 'ru-RU';
                recognition.start();
                isListening = true;
            }
            updateMicButton();
        }

        function updateMicButton() {
            const micBtn = document.getElementById('micBtn');
            if (isListening) {
                micBtn.textContent = 'üî¥ –¢—ã“£–¥–∞—É–¥–∞...';
                micBtn.classList.add('active');
            } else {
                micBtn.textContent = 'üé§ –ú–∏–∫—Ä–æ—Ñ–æ–Ω';
                micBtn.classList.remove('active');
            }
        }

        function toggleTTS() {
            ttsEnabled = !ttsEnabled;
            document.getElementById('ttsStatus').textContent = 
                ttsEnabled ? 
                    (currentLanguage === 'kk' ? '“ö–æ—Å—É–ª—ã' : '–í–∫–ª—é—á–µ–Ω') : 
                    (currentLanguage === 'kk' ? '”®—à—ñ—Ä—É–ª—ñ' : '–í—ã–∫–ª—é—á–µ–Ω');
        }

        function speakText(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = currentLanguage === 'kk' ? 'kk-KZ' : 'ru-RU';
                utterance.rate = 0.9;
                utterance.pitch = 1;
                speechSynthesis.speak(utterance);
            }
        }

        // –ü–µ—Ä–Ω–µ—Ç–∞“õ—Ç–∞ –±–∞—Å“õ–∞—Ä—É
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'984d3ba6c5ddecf1',t:'MTc1ODgzMTc0MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
