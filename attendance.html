<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8">
  <title>Attendance</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      height: 100vh;
    }
    /* –°–æ–ª –∂–∞“õ –ø–∞–Ω–µ–ª—å */
    .sidebar {
      width: 220px;
      background: #2c3e50;
      color: white;
      display: flex;
      flex-direction: column;
      padding: 20px 10px;
    }
    .sidebar h2 {
      font-size: 18px;
      margin-bottom: 20px;
      text-align: center;
    }
    .sidebar button {
      background: none;
      border: none;
      color: white;
      padding: 10px;
      text-align: left;
      cursor: pointer;
      font-size: 15px;
    }
    .sidebar button:hover {
      background: #34495e;
      border-radius: 5px;
    }

    /* –û“£ –∂–∞“õ –∫–æ–Ω—Ç–µ–Ω—Ç */
    .content {
      flex: 1;
      padding: 20px;
      background: #f4f6f9;
      display: flex;
      flex-direction: column;
    }
    .topbar {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    .topbar button {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
    }
    .topbar button:hover {
      background: #45a049;
    }

    /* –¢—ñ–∑—ñ–º —Å—Ç–∏–ª—ñ */
    #list div {
      margin: 5px 0;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 5px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: white;
    }
    #list button {
      background: red;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 3px;
      cursor: pointer;
    }
  </style>
  <script type="module">
    // Firebase SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } 
      from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDP2SHjJQYzu_lhWUbk1NBN6H65mR5YI_s",
      authDomain: "groowin-attendance.firebaseapp.com",
      projectId: "groowin-attendance",
      storageBucket: "groowin-attendance.appspot.com",
      messagingSenderId: "737566994771",
      appId: "1:737566994771:web:982cf9e32e968229f2b1a6",
      measurementId: "G-WJXHCBGJBN"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // –°–∞“õ—Ç–∞—É
    async function saveName() {
      const nameInput = document.getElementById("nameInput");
      const name = nameInput.value.trim();
      if (name === "") return alert("–ê—Ç—ã–Ω –µ–Ω–≥—ñ–∑!");
      await addDoc(collection(db, "attendance"), { name });
      nameInput.value = "";
      loadList();
    }

    // ”®—à—ñ—Ä—É
    async function deleteName(id) {
      await deleteDoc(doc(db, "attendance", id));
      loadList();
    }

    // –¢—ñ–∑—ñ–º–¥—ñ —à—ã“ì–∞—Ä—É
    async function loadList() {
      const listDiv = document.getElementById("list");
      listDiv.innerHTML = "";
      const querySnapshot = await getDocs(collection(db, "attendance"));
      querySnapshot.forEach((docSnap) => {
        const data = docSnap.data();
        const item = document.createElement("div");
        item.textContent = data.name;

        const delBtn = document.createElement("button");
        delBtn.textContent = "”®—à—ñ—Ä—É";
        delBtn.onclick = () => deleteName(docSnap.id);

        item.appendChild(delBtn);
        listDiv.appendChild(item);
      });
    }

    // –ö–æ–Ω—Ç–µ–Ω—Ç –∞—É—ã—Å—Ç—ã—Ä—É
    function showSection(section) {
      document.querySelectorAll(".section").forEach(s => s.style.display = "none");
      document.getElementById(section).style.display = "block";
    }

    // –ë–∞—Å—Ç–∞–ø“õ—ã —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä
    window.onload = () => {
      document.getElementById("saveBtn").onclick = saveName;
      document.getElementById("listBtn").onclick = () => { showSection("listSection"); loadList(); };
      document.getElementById("qrBtn").onclick = () => showSection("qrSection");
      document.getElementById("geoBtn").onclick = () => showSection("geoSection");

      showSection("listSection"); // ”ô—É–µ–ª–≥—ñ—Å—ñ ‚Äî –¢—ñ–∑—ñ–º
    };
  </script>
</head>
<body>
  <!-- –°–æ–ª –∂–∞“õ –ø–∞–Ω–µ–ª—å -->
  <div class="sidebar">
    <h2>–ù–∞–≤–∏–≥–∞—Ü–∏—è</h2>
    <button onclick="location.href='index.html'">üè† –ë–∞—Å—Ç—ã –±–µ—Ç</button>
    <button onclick="location.href='Smart Mugalim.html'">üë®üèª‚Äçüéì Smart Mugalim</button>
    <button>‚úÖ –¢“Ø–≥–µ–Ω–¥–µ—É</button>
  </div>

  <!-- –û“£ –∂–∞“õ –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <div class="content">
    <div class="topbar">
      <button id="listBtn">–¢—ñ–∑—ñ–º</button>
      <button id="qrBtn">QR</button>
      <button id="geoBtn">–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è</button>
    </div>

    <!-- –¢—ñ–∑—ñ–º -->
    <div id="listSection" class="section">
      <h2>–û“õ—É—à—ã–ª–∞—Ä —Ç—ñ–∑—ñ–º—ñ</h2>
      <input type="text" id="nameInput" placeholder="–ê—Ç—ã–Ω –µ–Ω–≥—ñ–∑">
      <button id="saveBtn">–°–∞“õ—Ç–∞—É</button>

      <h3>–°–∞“õ—Ç–∞–ª“ì–∞–Ω —Ç—ñ–∑—ñ–º:</h3>
      <div id="list"></div>
    </div>

    <!-- QR -->
    <div id="qrSection" class="section" style="display:none;">
      <h2>QR –±–µ—Ç—ñ</h2>
      <p>QR –∫–æ–¥ —à—ã“ì–∞—Ä—É –∫–µ–π—ñ–Ω “õ–æ—Å—ã–ª–∞–¥—ã.</p>
    </div>

    <!-- –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è -->
    <div id="geoSection" class="section" style="display:none;">
      <h2>–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –±–µ—Ç—ñ</h2>
      <p>–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏—è—Å—ã –∫–µ–π—ñ–Ω “õ–æ—Å—ã–ª–∞–¥—ã.</p>
    </div>
  </div>
</body>
</html>
