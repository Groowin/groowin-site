<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResoRace - –†–µ–∑–æ–Ω–∞–Ω—Å –∂–∞—Ä—ã—Å—ã</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            height: 100%;
            overflow-x: hidden;
        }

        html {
            height: 100%;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100%;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .game-setup {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .team-setup {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .avatar-selection {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 15px 0;
        }

        .avatar {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .avatar:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
        }

        .avatar.selected {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.3);
        }

        .race-track {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .track {
            position: relative;
            height: 120px;
            background: linear-gradient(90deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            border-radius: 60px;
            margin: 20px 0;
            overflow: hidden;
            border: 3px solid #333;
        }

        .finish-line {
            position: absolute;
            right: 10px;
            top: 0;
            bottom: 0;
            width: 8px;
            background: repeating-linear-gradient(
                45deg,
                #000,
                #000 10px,
                #fff 10px,
                #fff 20px
            );
            border-radius: 4px;
        }

        .team-car {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 60px;
            height: 40px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            transition: left 0.5s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .team1-car {
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            left: 10px;
        }

        .team2-car {
            background: linear-gradient(45deg, #4ECDC4, #44A08D);
            left: 10px;
        }

        .question-panel {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }

        .question {
            font-size: 20px;
            margin-bottom: 25px;
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
        }

        .answers {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .answer-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .answer-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .answer-btn.correct {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            border-color: #2e7d32;
        }

        .answer-btn.incorrect {
            background: linear-gradient(45deg, #f44336, #d32f2f);
            border-color: #c62828;
        }

        .team-info {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }

        .team-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            flex: 1;
            margin: 0 10px;
            backdrop-filter: blur(10px);
        }

        .frequency-meter {
            background: rgba(0, 0, 0, 0.2);
            height: 20px;
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
        }

        .frequency-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff4444, #ffff44, #44ff44);
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
        }

        .resonance-zone {
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            width: 15%;
            background: rgba(255, 255, 255, 0.3);
            border-left: 2px solid #fff;
        }

        .btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .level-indicator {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .winner-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .winner-content {
            background: linear-gradient(135deg, #667eea, #764ba2);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            animation: celebration 2s ease-in-out;
        }

        @keyframes celebration {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(2deg); }
            75% { transform: scale(1.1) rotate(-2deg); }
        }

        .medal {
            font-size: 80px;
            animation: spin 3s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .sound-effects {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .resonance-effect {
            animation: resonance-pulse 0.5s ease-in-out infinite;
        }

        @keyframes resonance-pulse {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 40px rgba(76, 175, 80, 0.8);
                transform: scale(1.02);
            }
        }

        @media (max-width: 768px) {
            .game-setup {
                grid-template-columns: 1fr;
            }
            
            .answers {
                grid-template-columns: 1fr;
            }
            
            .avatar-selection {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffff00;
            border-radius: 50%;
            animation: float 3s linear infinite;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-10px) rotate(360deg);
                opacity: 0;
            }
        }

        .ranking-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
        }

        .ranking-table th,
        .ranking-table td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .ranking-table th {
            background: rgba(255, 255, 255, 0.2);
            font-weight: bold;
            font-size: 16px;
        }

        .ranking-table tr:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .rank-medal {
            font-size: 24px;
            margin-right: 10px;
        }

        .rank-1 {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #000;
            font-weight: bold;
        }

        .rank-2 {
            background: linear-gradient(45deg, #C0C0C0, #A9A9A9);
            color: #000;
            font-weight: bold;
        }

        .rank-3 {
            background: linear-gradient(45deg, #CD7F32, #B8860B);
            color: #fff;
            font-weight: bold;
        }

        .team-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #4CAF50;
        }

        .accuracy-bar {
            background: rgba(255, 255, 255, 0.2);
            height: 8px;
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }

        .accuracy-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4444, #ffff44, #44ff44);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <div class="header">
            <h1>üèÅ ResoRace - –†–µ–∑–æ–Ω–∞–Ω—Å –∂–∞—Ä—ã—Å—ã üèÅ</h1>
            <p>–ö–æ–º–∞–Ω–¥–∞–ª—ã“õ –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞-–∂–∞—Ä—ã—Å! –†–µ–∑–æ–Ω–∞–Ω—Å –Ω“Ø–∫—Ç–µ—Å—ñ–Ω–µ –±—ñ—Ä—ñ–Ω—à—ñ –∂–µ—Ç–∫–µ–Ω –∫–æ–º–∞–Ω–¥–∞ –∂–µ“£—ñ–º–ø–∞–∑!</p>
        </div>

        <div class="sound-effects">
            <button onclick="toggleSound()" id="soundBtn">üîä –î—ã–±—ã—Å: “ö–æ—Å—É–ª—ã</button>
        </div>

        <div id="setupPhase">
            <div style="text-align: center; margin-bottom: 20px;">
                <button class="btn" onclick="addTeam()">‚ûï –ö–æ–º–∞–Ω–¥–∞ “õ–æ—Å—É</button>
                <button class="btn" onclick="removeTeam()" style="background: linear-gradient(45deg, #f44336, #d32f2f);">‚ûñ –ö–æ–º–∞–Ω–¥–∞ ”©—à—ñ—Ä—É</button>
                <span style="margin: 0 20px;">–ö–æ–º–∞–Ω–¥–∞–ª–∞—Ä —Å–∞–Ω—ã: <span id="teamCount">2</span></span>
            </div>

            <div class="game-setup" id="teamsContainer">
                <div class="team-setup" data-team="1">
                    <h3>üî¥ 1-–∫–æ–º–∞–Ω–¥–∞</h3>
                    <input type="text" id="team1Name" placeholder="–ö–æ–º–∞–Ω–¥–∞ –∞—Ç–∞—É—ã" 
                           style="width: 100%; padding: 10px; border-radius: 5px; border: none; margin-bottom: 15px;">
                    
                    <h4>–ê–≤–∞—Ç–∞—Ä —Ç–∞“£–¥–∞“£—ã–∑:</h4>
                    <div class="avatar-selection">
                        <div class="avatar" onclick="selectAvatar(1, 'engineer')" data-avatar="engineer">
                            <div style="font-size: 30px;">üë∑‚Äç‚ôÇÔ∏è</div>
                            <div>–ò–Ω–∂–µ–Ω–µ—Ä</div>
                        </div>
                        <div class="avatar" onclick="selectAvatar(1, 'scientist')" data-avatar="scientist">
                            <div style="font-size: 30px;">üî¨</div>
                            <div>–ó–µ—Ä—Ç—Ç–µ—É—à—ñ</div>
                        </div>
                        <div class="avatar" onclick="selectAvatar(1, 'electronics')" data-avatar="electronics">
                            <div style="font-size: 30px;">‚ö°</div>
                            <div>–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫</div>
                        </div>
                        <div class="avatar" onclick="selectAvatar(1, 'physicist')" data-avatar="physicist">
                            <div style="font-size: 30px;">üßë‚Äçüî¨</div>
                            <div>–§–∏–∑–∏–∫</div>
                        </div>
                        <div class="avatar" onclick="selectAvatar(1, 'inventor')" data-avatar="inventor">
                            <div style="font-size: 30px;">üí°</div>
                            <div>–û–π–ª–∞–ø —Ç–∞–±—É—à—ã</div>
                        </div>
                        <div class="avatar" onclick="selectAvatar(1, 'robot')" data-avatar="robot">
                            <div style="font-size: 30px;">ü§ñ</div>
                            <div>–†–æ–±–æ—Ç</div>
                        </div>
                    </div>
                </div>

                <div class="team-setup" data-team="2">
                    <h3>üîµ 2-–∫–æ–º–∞–Ω–¥–∞</h3>
                    <input type="text" id="team2Name" placeholder="–ö–æ–º–∞–Ω–¥–∞ –∞—Ç–∞—É—ã" 
                           style="width: 100%; padding: 10px; border-radius: 5px; border: none; margin-bottom: 15px;">
                    
                    <h4>–ê–≤–∞—Ç–∞—Ä —Ç–∞“£–¥–∞“£—ã–∑:</h4>
                    <div class="avatar-selection">
                        <div class="avatar" onclick="selectAvatar(2, 'engineer')" data-avatar="engineer">
                            <div style="font-size: 30px;">üë∑‚Äç‚ôÄÔ∏è</div>
                            <div>–ò–Ω–∂–µ–Ω–µ—Ä</div>
                        </div>
                        <div class="avatar" onclick="selectAvatar(2, 'scientist')" data-avatar="scientist">
                            <div style="font-size: 30px;">üß™</div>
                            <div>–ó–µ—Ä—Ç—Ç–µ—É—à—ñ</div>
                        </div>
                        <div class="avatar" onclick="selectAvatar(2, 'electronics')" data-avatar="electronics">
                            <div style="font-size: 30px;">üîå</div>
                            <div>–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫</div>
                        </div>
                        <div class="avatar" onclick="selectAvatar(2, 'physicist')" data-avatar="physicist">
                            <div style="font-size: 30px;">üë©‚Äçüî¨</div>
                            <div>–§–∏–∑–∏–∫</div>
                        </div>
                        <div class="avatar" onclick="selectAvatar(2, 'inventor')" data-avatar="inventor">
                            <div style="font-size: 30px;">üî¨</div>
                            <div>–û–π–ª–∞–ø —Ç–∞–±—É—à—ã</div>
                        </div>
                        <div class="avatar" onclick="selectAvatar(2, 'robot')" data-avatar="robot">
                            <div style="font-size: 30px;">ü¶æ</div>
                            <div>–†–æ–±–æ—Ç</div>
                        </div>
                    </div>
                </div>
            </div>

            <div style="text-align: center;">
                <button class="btn" onclick="startGame()">üöÄ –ñ–∞—Ä—ã—Å—Ç—ã –±–∞—Å—Ç–∞—É</button>
            </div>
        </div>

        <div id="gamePhase" style="display: none;">
            <div class="level-indicator">
                <h2 id="currentLevel">–î–µ“£–≥–µ–π 1: "–ñ–∏—ñ–ª—ñ–∫ –±–∞–ø—Ç–∞—É"</h2>
                <p id="levelDescription">–†–µ–∑–æ–Ω–∞–Ω—Å –∂–∏—ñ–ª—ñ–≥—ñ–Ω —Ç–∞–±—É “Ø—à—ñ–Ω –Ω–µ–≥—ñ–∑–≥—ñ “±“ì—ã–º–¥–∞—Ä–¥—ã –º–µ“£–≥–µ—Ä—É</p>
            </div>

            <div class="team-info">
                <div class="team-card">
                    <h3 id="team1Display">üî¥ –ö–æ–º–∞–Ω–¥–∞ 1</h3>
                    <div id="team1Avatar">üë∑‚Äç‚ôÇÔ∏è</div>
                    <div class="frequency-meter">
                        <div class="frequency-bar" id="team1Progress" style="width: 0%">
                            <div class="resonance-zone"></div>
                        </div>
                    </div>
                    <div>–ñ–∏—ñ–ª—ñ–∫: <span id="team1Freq">0</span> –ì—Ü</div>
                </div>

                <div class="team-card">
                    <h3 id="team2Display">üîµ –ö–æ–º–∞–Ω–¥–∞ 2</h3>
                    <div id="team2Avatar">üî¨</div>
                    <div class="frequency-meter">
                        <div class="frequency-bar" id="team2Progress" style="width: 0%">
                            <div class="resonance-zone"></div>
                        </div>
                    </div>
                    <div>–ñ–∏—ñ–ª—ñ–∫: <span id="team2Freq">0</span> –ì—Ü</div>
                </div>
            </div>

            <div class="race-track">
                <h3>üèÅ –ñ–∞—Ä—ã—Å –∂–æ–ª—ã</h3>
                <div class="track">
                    <div class="team-car team1-car" id="car1">üî¥</div>
                    <div class="finish-line"></div>
                </div>
                <div class="track">
                    <div class="team-car team2-car" id="car2">üîµ</div>
                    <div class="finish-line"></div>
                </div>
            </div>

            <div class="question-panel">
                <div class="question" id="questionText">
                    –°“±—Ä–∞“õ –∂“Ø–∫—Ç–µ–ª—É–¥–µ...
                </div>
                
                <div class="answers" id="answersContainer">
                    <!-- –ñ–∞—É–∞–ø—Ç–∞—Ä –¥–∏–Ω–∞–º–∏–∫–∞–ª—ã“õ —Ç“Ø—Ä–¥–µ “õ–æ—Å—ã–ª–∞–¥—ã -->
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <div>–ö–µ–∑–µ–∫: <span id="currentTeam">üî¥ 1-–∫–æ–º–∞–Ω–¥–∞</span></div>
                    <button class="btn" onclick="nextQuestion()" id="nextBtn" style="display: none;">–ö–µ–ª–µ—Å—ñ —Å“±—Ä–∞“õ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ñ–µ“£—ñ–º–ø–∞–∑ –º–æ–¥–∞–ª—ã -->
    <div class="winner-modal" id="winnerModal">
        <div class="winner-content">
            <div class="medal">üèÜ</div>
            <h2 id="winnerText">“ö“±—Ç—Ç—ã“õ—Ç–∞–π–º—ã–∑!</h2>
            <h3 id="winnerTeam"></h3>
            <p>üéâ –†–µ–∑–æ–Ω–∞–Ω—Å —á–µ–º–ø–∏–æ–Ω—ã! üéâ</p>
            <button class="btn" onclick="showRanking()">üìä –†–µ–π—Ç–∏–Ω–≥ –∫”©—Ä—É</button>
            <button class="btn" onclick="restartGame()">üîÑ “ö–∞–π—Ç–∞ –æ–π–Ω–∞—É</button>
        </div>
    </div>

    <!-- –†–µ–π—Ç–∏–Ω–≥ –º–æ–¥–∞–ª—ã -->
    <div class="winner-modal" id="rankingModal">
        <div class="winner-content" style="max-width: 700px; max-height: 80vh; overflow-y: auto;">
            <h2>üèÜ –§–∏–Ω–∞–ª–¥—ã“õ —Ä–µ–π—Ç–∏–Ω–≥ üèÜ</h2>
            <div id="rankingTable"></div>
            <div style="margin-top: 20px;">
                <button class="btn" onclick="hideRanking()">üîô –ê—Ä—Ç“õ–∞</button>
                <button class="btn" onclick="restartGame()">üîÑ “ö–∞–π—Ç–∞ –æ–π–Ω–∞—É</button>
            </div>
        </div>
    </div>

    <script>
        let gameState = {
            teams: [
                { name: '', avatar: '', progress: 0, frequency: 0, correctAnswers: 0, totalAnswers: 0, rank: 0 },
                { name: '', avatar: '', progress: 0, frequency: 0, correctAnswers: 0, totalAnswers: 0, rank: 0 }
            ],
            currentTeam: 0,
            currentLevel: 1,
            currentQuestion: 0,
            soundEnabled: true,
            gameStarted: false,
            teamCount: 2,
            gameFinished: false
        };

        const teamColors = ['üî¥', 'üîµ', 'üü¢', 'üü°', 'üü£', 'üü†'];
        const teamEmojis = {
            engineer: ['üë∑‚Äç‚ôÇÔ∏è', 'üë∑‚Äç‚ôÄÔ∏è', 'üë∑', 'üßë‚Äçüîß', 'üë©‚Äçüîß', 'üîß'],
            scientist: ['üî¨', 'üß™', 'üßë‚Äçüî¨', 'üë©‚Äçüî¨', '‚öóÔ∏è', 'üî≠'],
            electronics: ['‚ö°', 'üîå', 'üí°', 'üîã', '‚öôÔ∏è', 'üñ•Ô∏è'],
            physicist: ['üßë‚Äçüî¨', 'üë©‚Äçüî¨', 'üî¨', '‚öõÔ∏è', 'üßÆ', 'üìê'],
            inventor: ['üí°', 'üî¨', 'üß†', '‚öôÔ∏è', 'üîß', 'üõ†Ô∏è'],
            robot: ['ü§ñ', 'ü¶æ', 'ü¶ø', 'üëæ', 'üî©', '‚öôÔ∏è']
        };

        const baseQuestions = [
            // 1-–¥–µ“£–≥–µ–π: –ù–µ–≥—ñ–∑–≥—ñ “±“ì—ã–º–¥–∞—Ä (12 —Å“±—Ä–∞“õ)
            {
                question: "–ö–µ—Ä–Ω–µ—É —Ä–µ–∑–æ–Ω–∞–Ω—Å—ã –¥–µ–≥–µ–Ω—ñ–º—ñ–∑ –Ω–µ?",
                answers: ["–¢–æ–∫—Ç—ã“£ —Ç”©–º–µ–Ω–¥–µ—É—ñ", "–¢–æ–∫—Ç—ã“£ –∂–∏—ñ–ª—ñ–≥—ñ–Ω—ñ“£ ”©–∑–≥–µ—Ä—É—ñ", "–¢–æ–∫—Ç—ã“£ –µ“£ “Ø–ª–∫–µ–Ω –º”ô–Ω–≥–µ –∂–µ—Ç—É—ñ", "–ö–µ–¥–µ—Ä–≥—ñ–Ω—ñ“£ –∞—Ä—Ç—É—ã"],
                correct: 2,
                level: 1
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å “õ–∞–π —Ç—ñ–∑–±–µ–∫—Ç–µ –±–∞–π“õ–∞–ª–∞–¥—ã?",
                answers: ["–¢“±—Ä–∞“õ—Ç—ã —Ç–æ–∫ —Ç—ñ–∑–±–µ–≥—ñ–Ω–¥–µ", "–ê–π–Ω—ã–º–∞–ª—ã —Ç–æ–∫ —Ç—ñ–∑–±–µ–≥—ñ–Ω–¥–µ", "–¢–µ–∫ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–¥–∞", "–¢–µ–∫ –∫–∞—Ç—É—à–∫–∞–¥–∞"],
                correct: 1,
                level: 1
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å –∫–µ–∑—ñ–Ω–¥–µ —Ç–æ–∫ —à–∞–º–∞—Å—ã...",
                answers: ["–ï“£ “Ø–ª–∫–µ–Ω –±–æ–ª–∞–¥—ã", "–¢”©–º–µ–Ω–¥–µ–π–¥—ñ", "–¢“±—Ä–∞“õ—Ç—ã –±–æ–ª–∞–¥—ã", "–ù”©–ª–≥–µ —Ç–µ“£"],
                correct: 0,
                level: 1
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å —à–∞—Ä—Ç—ã “õ–∞–ª–∞–π ”©—Ä–Ω–µ–∫—Ç–µ–ª–µ–¥—ñ?",
                answers: ["XL > XC", "XL = XC", "XL < XC", "XL = 0"],
                correct: 1,
                level: 1
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å –∫–µ–∑—ñ–Ω–¥–µ —Ç–æ–ª—ã“õ –∫–µ–¥–µ—Ä–≥—ñ –Ω–µ–≥–µ —Ç–µ“£?",
                answers: ["R", "XL", "XC", "0"],
                correct: 0,
                level: 1
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å –∂–∏—ñ–ª—ñ–≥—ñ –¥–µ–≥–µ–Ω—ñ–º—ñ–∑ –Ω–µ?",
                answers: ["–¢–æ–∫—Ç—ã“£ –∫–µ—Ä–Ω–µ—É–º–µ–Ω —Å”ô–π–∫–µ—Å –∫–µ–ª–º–µ—É –∂–∏—ñ–ª—ñ–≥—ñ", "XL = XC –±–æ–ª–∞—Ç—ã–Ω –∂–∏—ñ–ª—ñ–∫", "–¢–æ–∫—Ç—ã“£ –Ω”©–ª –±–æ–ª–∞—Ç—ã–Ω –∂–∏—ñ–ª—ñ–≥—ñ", "R –µ“£ –∫—ñ—à—ñ –±–æ–ª–∞—Ç—ã–Ω –∂–∏—ñ–ª—ñ–∫"],
                correct: 1,
                level: 1
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å –∫–µ–∑—ñ–Ω–¥–µ —Ñ–∞–∑–∞ –±“±—Ä—ã—à—ã:",
                answers: ["0¬∞", "45¬∞", "90¬∞", "180¬∞"],
                correct: 0,
                level: 1
            },
            {
                question: "–ò–Ω–¥—É–∫—Ç–∏–≤—Ç—ñ–∫ —Ä–µ–∞–∫—Ç–∏–≤ –∫–µ–¥–µ—Ä–≥—ñ:",
                answers: ["XL = œâL", "XL = 1/œâL", "XL = œâ/C", "XL = R/L"],
                correct: 0,
                level: 1
            },
            {
                question: "–°—ã–π—ã–º–¥—ã–ª—ã“õ —Ä–µ–∞–∫—Ç–∏–≤ –∫–µ–¥–µ—Ä–≥—ñ:",
                answers: ["XC = œâC", "XC = 1/œâC", "XC = œâL", "XC = L/R"],
                correct: 1,
                level: 1
            },
            {
                question: "–≠–Ω–µ—Ä–≥–∏—è –∞–ª–º–∞—Å—É—ã “õ–∞–π —ç–ª–µ–º–µ–Ω—Ç—Ç–µ—Ä –∞—Ä–∞—Å—ã–Ω–¥–∞ –∂“Ø—Ä–µ–¥—ñ?",
                answers: ["–ö–∞—Ç—É—à–∫–∞ –º–µ–Ω –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä", "–†–µ–∑–∏—Å—Ç–æ—Ä –º–µ–Ω –∫–∞—Ç—É—à–∫–∞", "–ö–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä –º–µ–Ω —Ä–µ–∑–∏—Å—Ç–æ—Ä", "–ë–∞—Ä–ª—ã“ì—ã"],
                correct: 0,
                level: 1
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å –∫–µ–∑—ñ–Ω–¥–µ —Ä–µ–∞–∫—Ç–∏–≤ “õ—É–∞—Ç:",
                answers: ["–ù”©–ª–≥–µ —Ç–µ“£", "–ï“£ –∫”©–ø", "–¢–µ—Ä—ñ—Å", "–ë–µ–ª–≥—ñ—Å—ñ–∑"],
                correct: 0,
                level: 1
            },
            {
                question: "–ï–≥–µ—Ä –∂–∏—ñ–ª—ñ–∫ –∞—Ä—Ç—Å–∞, “õ–∞–π —ç–ª–µ–º–µ–Ω—Ç—Ç—ñ“£ –∫–µ–¥–µ—Ä–≥—ñ—Å—ñ ”©—Å–µ–¥—ñ?",
                answers: ["–ò–Ω–¥—É–∫—Ç–∏–≤—Ç—ñ–∫", "–°—ã–π—ã–º–¥—ã–ª—ã“õ", "–ë–µ–ª—Å–µ–Ω–¥—ñ", "–ë–∞—Ä–ª—ã“ì—ã"],
                correct: 0,
                level: 1
            },
            // 2-–¥–µ“£–≥–µ–π: “ö–∞—Å–∏–µ—Ç—Ç–µ—Ä –º–µ–Ω ”ô—Å–µ—Ä–ª–µ—Ä (12 —Å“±—Ä–∞“õ)
            {
                question: "–ï–≥–µ—Ä –∂–∏—ñ–ª—ñ–∫ –∞–∑–∞–π—Å–∞, “õ–∞–π —ç–ª–µ–º–µ–Ω—Ç –±–∞—Å—ã–º –±–æ–ª–∞–¥—ã?",
                answers: ["–ò–Ω–¥—É–∫—Ç–∏–≤—Ç—ñ–∫", "–°—ã–π—ã–º–¥—ã–ª—ã“õ", "–ë–µ–ª—Å–µ–Ω–¥—ñ", "–ë–∞—Ä–ª—ã“ì—ã"],
                correct: 1,
                level: 2
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å –∂–∏—ñ–ª—ñ–≥—ñ–Ω—ñ“£ —Ñ–æ—Ä–º—É–ª–∞—Å—ã:",
                answers: ["f = 1 / (2œÄ‚àö(LC))", "f = 2œÄ‚àö(LC)", "f = 1 / (LC)", "f = ‚àö(LC)"],
                correct: 0,
                level: 2
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å –∫–µ–∑—ñ–Ω–¥–µ –∫–µ—Ä–Ω–µ—É –º–µ–Ω —Ç–æ–∫ –∞—Ä–∞—Å—ã–Ω–¥–∞“ì—ã —Ñ–∞–∑–∞:",
                answers: ["–°–∏–Ω—Ñ–∞–∑–∞–ª—ã“õ", "“ö–∞—Ä–∞–º–∞-“õ–∞—Ä—Å—ã", "90¬∞ —ã“ì—ã—Å“õ–∞–Ω", "180¬∞ —ã“ì—ã—Å“õ–∞–Ω"],
                correct: 0,
                level: 2
            },
            {
                question: "–¢–æ–∫ –ø–µ–Ω –∫–µ—Ä–Ω–µ—É —Å–∏–Ω—Ñ–∞–∑–∞–ª—ã“õ –±–æ–ª“ì–∞–Ω–¥–∞:",
                answers: ["“ö—É–∞—Ç –µ“£ “Ø–ª–∫–µ–Ω", "“ö—É–∞—Ç –µ“£ –∫—ñ—à—ñ", "–¢–æ–∫ –Ω”©–ª–≥–µ —Ç–µ“£", "–ö–µ—Ä–Ω–µ—É –Ω”©–ª–≥–µ —Ç–µ“£"],
                correct: 0,
                level: 2
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å –∫–µ–∑—ñ–Ω–¥–µ —Ç–æ–∫ –Ω–µ–≥–µ –µ“£ “Ø–ª–∫–µ–Ω –º”ô–Ω–≥–µ –∂–µ—Ç–µ–¥—ñ?",
                answers: ["–†–µ–∞–∫—Ç–∏–≤ –∫–µ–¥–µ—Ä–≥—ñ–ª–µ—Ä –∂–æ–π—ã–ª–∞–¥—ã", "–ë–µ–ª—Å–µ–Ω–¥—ñ –∫–µ–¥–µ—Ä–≥—ñ –∞—Ä—Ç–∞–¥—ã", "–¢–æ–∫ —Ç”©–º–µ–Ω–¥–µ–π–¥—ñ", "–ö–µ—Ä–Ω–µ—É –∞–∑–∞—è–¥—ã"],
                correct: 0,
                level: 2
            },
            {
                question: "–≠–Ω–µ—Ä–≥–∏—è —à—ã“ì—ã–Ω—ã –Ω–µ–¥–µ–Ω —Ç—É—ã–Ω–¥–∞–π–¥—ã?",
                answers: ["–ë–µ–ª—Å–µ–Ω–¥—ñ –∫–µ–¥–µ—Ä–≥—ñ", "–ö–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä", "–ö–∞—Ç—É—à–∫–∞", "–ë–∞—Ä–ª—ã“ì—ã"],
                correct: 0,
                level: 2
            },
            {
                question: "–ï–≥–µ—Ä —Ç—ñ–∑–±–µ–∫—Ç–µ R –∞—Ä—Ç—Å–∞, —Ä–µ–∑–æ–Ω–∞–Ω—Å “õ–∞–ª–∞–π ”©–∑–≥–µ—Ä–µ–¥—ñ?",
                answers: ["”ò–ª—Å—ñ—Ä–µ–π–¥—ñ", "–ö“Ø—à–µ–π–µ–¥—ñ", "”®–∑–≥–µ—Ä–º–µ–π–¥—ñ", "–¢–æ–ª—ã“ì—ã–º–µ–Ω –∂–æ–π—ã–ª–∞–¥—ã"],
                correct: 0,
                level: 2
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å –∂–∏—ñ–ª—ñ–≥—ñ –∞–∑–∞–π—Å–∞, –±“±–ª –Ω–µ–Ω—ñ –±—ñ–ª–¥—ñ—Ä–µ–¥—ñ?",
                answers: ["L –Ω–µ–º–µ—Å–µ C –∞—Ä—Ç“õ–∞–Ω", "R –∞—Ä—Ç“õ–∞–Ω", "R –∫–µ–º—ñ–≥–µ–Ω", "–¢–æ–∫ –∞–∑–∞–π“ì–∞–Ω"],
                correct: 0,
                level: 2
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å —Ç–µ—Ö–Ω–∏–∫–∞–¥–∞ “õ–∞–π–¥–∞ “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã?",
                answers: ["–†–∞–¥–∏–æ, —Ç–µ–ª–µ–¥–∏–¥–∞—Ä, —Ñ–∏–ª—å—Ç—Ä", "–ë–∞—Ç–∞—Ä–µ—è–ª–∞—Ä–¥–∞", "–ú–æ—Ç–æ—Ä–ª–∞—Ä–¥–∞", "“ö–∞—Ç—Ç—ã –¥–µ–Ω–µ —Ñ–∏–∑–∏–∫–∞—Å—ã–Ω–¥–∞"],
                correct: 0,
                level: 2
            },
            {
                question: "–†–∞–¥–∏–æ “õ–∞–±—ã–ª–¥–∞“ì—ã—à—Ç–∞“ì—ã —Ä–µ–∑–æ–Ω–∞–Ω—Å –Ω–µ “Ø—à—ñ–Ω “õ–∞–∂–µ—Ç?",
                answers: ["–ë–µ–ª–≥—ñ–ª—ñ –∂–∏—ñ–ª—ñ–∫—Ç—ñ —Ç–∞“£–¥–∞—É", "–ö–µ—Ä–Ω–µ—É–¥—ñ –∞–∑–∞–π—Ç—É", "–¢–æ–∫—Ç—ã —Ç–æ“õ—Ç–∞—Ç—É", "–°—ã–π—ã–º–¥—ã–ª—ã“õ—Ç—ã –∞—Ä—Ç—Ç—ã—Ä—É"],
                correct: 0,
                level: 2
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å –∫–µ–∑—ñ–Ω–¥–µ —Ñ–∞–∑–∞ –Ω”©–ª–≥–µ —Ç–µ“£ –±–æ–ª—Å–∞:",
                answers: ["–¢–æ–∫ –ø–µ–Ω –∫–µ—Ä–Ω–µ—É –±—ñ—Ä —Ñ–∞–∑–∞–¥–∞", "“ö–∞—Ä–∞–º–∞-“õ–∞—Ä—Å—ã —Ñ–∞–∑–∞–¥–∞", "–¢–æ–∫ –∞—Ä—Ç—Ç–∞", "–ö–µ—Ä–Ω–µ—É –∞–ª–¥–∞"],
                correct: 0,
                level: 2
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å –∫–µ–∑—ñ–Ω–¥–µ —Ç–æ–ª—ã“õ “õ—É–∞—Ç:",
                answers: ["–ë–µ–ª—Å–µ–Ω–¥—ñ “õ—É–∞—Ç“õ–∞ —Ç–µ“£", "–†–µ–∞–∫—Ç–∏–≤ “õ—É–∞—Ç“õ–∞ —Ç–µ“£", "–ù”©–ª–≥–µ —Ç–µ“£", "–¢–µ—Ä—ñ—Å –º”ô–Ω–¥—ñ"],
                correct: 0,
                level: 2
            },
            // 3-–¥–µ“£–≥–µ–π: –ï—Å–µ–ø—Ç–µ—É–ª–µ—Ä –º–µ–Ω “õ–æ–ª–¥–∞–Ω—É (12 —Å“±—Ä–∞“õ)
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å –∂–∏—ñ–ª—ñ–≥—ñ–Ω–µ –Ω–µ ”ô—Å–µ—Ä –µ—Ç–µ–¥—ñ?",
                answers: ["L –º–µ–Ω C", "R", "–¢–µ–∫ L", "–¢–µ–∫ C"],
                correct: 0,
                level: 3
            },
            {
                question: "–ï–≥–µ—Ä C –∞—Ä—Ç—Å–∞, —Ä–µ–∑–æ–Ω–∞–Ω—Å –∂–∏—ñ–ª—ñ–≥—ñ:",
                answers: ["–ê–∑–∞—è–¥—ã", "–ê—Ä—Ç–∞–¥—ã", "”®–∑–≥–µ—Ä–º–µ–π–¥—ñ", "R-“ì–∞ —Ç”ô—É–µ–ª–¥—ñ"],
                correct: 0,
                level: 3
            },
            {
                question: "–ï–≥–µ—Ä L –∞—Ä—Ç—Å–∞, —Ä–µ–∑–æ–Ω–∞–Ω—Å –∂–∏—ñ–ª—ñ–≥—ñ:",
                answers: ["–ê–∑–∞—è–¥—ã", "–ê—Ä—Ç–∞–¥—ã", "”®–∑–≥–µ—Ä–º–µ–π–¥—ñ", "R –∞–∑–∞—è–¥—ã"],
                correct: 0,
                level: 3
            },
            {
                question: "–†–µ–∑–æ–Ω–∞–Ω—Å –∫–µ–∑—ñ–Ω–¥–µ –∫–µ—Ä–Ω–µ—É–ª–µ—Ä–¥—ñ“£ —Ñ–∞–∑–∞—Å—ã:",
                answers: ["“ö–∞—Ä–∞–º–∞-“õ–∞—Ä—Å—ã –±–∞“ì—ã—Ç—Ç–∞–ª“ì–∞–Ω", "–ë—ñ—Ä –±–∞“ì—ã—Ç—Ç–∞", "45¬∞ —ã“ì—ã—Å“õ–∞–Ω", "90¬∞ —ã“ì—ã—Å“õ–∞–Ω"],
                correct: 0,
                level: 3
            },
            {
                question: "XL = XC —à–∞—Ä—Ç—ã –æ—Ä—ã–Ω–¥–∞–ª“ì–∞–Ω–¥–∞:",
                answers: ["–†–µ–∑–æ–Ω–∞–Ω—Å –±–æ–ª–∞–¥—ã", "–¢–æ–∫ –∞–∑–∞—è–¥—ã", "–ö–µ—Ä–Ω–µ—É –∞–∑–∞—è–¥—ã", "R –∞—Ä—Ç–∞–¥—ã"],
                correct: 0,
                level: 3
            },
            {
                question: "–ë–µ–ª—Å–µ–Ω–¥—ñ “õ—É–∞—Ç —Ä–µ–∑–æ–Ω–∞–Ω—Å –∫–µ–∑—ñ–Ω–¥–µ:",
                answers: ["P = UI", "P = 0", "P = I¬≤XL", "P = I¬≤XC"],
                correct: 0,
                level: 3
            },
            // –ï—Å–µ–ø—Ç—ñ–∫ —Å“±—Ä–∞“õ—Ç–∞—Ä (6 —Å“±—Ä–∞“õ)
            {
                question: "L = 0,1 –ì–Ω, C = 25 –º–∫–§. f = ?",
                answers: ["100 –ì—Ü", "200 –ì—Ü", "50 –ì—Ü", "10 –ì—Ü"],
                correct: 0,
                level: 3
            },
            {
                question: "L = 0,05 –ì–Ω, f‚ÇÄ = 100 –ì—Ü ‚Üí C = ?",
                answers: ["50 –º–∫–§", "25 –º–∫–§", "100 –º–∫–§", "10 –º–∫–§"],
                correct: 0,
                level: 3
            },
            {
                question: "R = 20 –û–º, L = 0,2 –ì–Ω, C = 50 –º–∫–§ ‚Üí —Ä–µ–∑–æ–Ω–∞–Ω—Å –∫–µ–∑—ñ–Ω–¥–µ Z = ?",
                answers: ["20 –û–º", "0", "200 –û–º", "10 –û–º"],
                correct: 0,
                level: 3
            },
            {
                question: "f‚ÇÄ = 500 –ì—Ü, C 4 –µ—Å–µ –∞–∑–∞–π—Å–∞ ‚Üí –∂–∞“£–∞ f = ?",
                answers: ["1000 –ì—Ü", "250 –ì—Ü", "500 –ì—Ü", "2000 –ì—Ü"],
                correct: 0,
                level: 3
            },
            {
                question: "–ñ–∏—ñ–ª—ñ–∫ 2 –µ—Å–µ –∞—Ä—Ç“õ–∞–Ω–¥–∞ —Ç–æ–∫ –∞–∑–∞–π–¥—ã. –¢—ñ–∑–±–µ–∫—Ç–µ –Ω–µ –±–∞—Å—ã–º?",
                answers: ["–ò–Ω–¥—É–∫—Ç–∏–≤—Ç—ñ–∫", "–°—ã–π—ã–º–¥—ã–ª—ã“õ", "–ë–µ–ª—Å–µ–Ω–¥—ñ", "–ë–∞—Ä–ª—ã“ì—ã"],
                correct: 0,
                level: 3
            },
            {
                question: "L = 0,1 –ì–Ω, C = 100 –º–∫–§ ‚Üí f‚ÇÄ = ?",
                answers: ["50 –ì—Ü", "100 –ì—Ü", "25 –ì—Ü", "10 –ì—Ü"],
                correct: 0,
                level: 3
            }
        ];

        let gameQuestions = [];

        function generateGameQuestions() {
            const questionsPerTeam = 6;
            const totalQuestions = gameState.teamCount * questionsPerTeam;
            
            // –°“±—Ä–∞“õ—Ç–∞—Ä–¥—ã –¥–µ“£–≥–µ–π –±–æ–π—ã–Ω—à–∞ –±”©–ª—É
            const level1Questions = baseQuestions.filter(q => q.level === 1);
            const level2Questions = baseQuestions.filter(q => q.level === 2);
            const level3Questions = baseQuestions.filter(q => q.level === 3);
            
            gameQuestions = [];
            
            // ”ò—Ä –¥–µ“£–≥–µ–π–¥–µ–Ω —Ç–µ“£ –º”©–ª—à–µ—Ä–¥–µ —Å“±—Ä–∞“õ –∞–ª—É
            const questionsPerLevel = Math.ceil(totalQuestions / 3);
            
            // –°“±—Ä–∞“õ—Ç–∞—Ä–¥—ã –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä—É –∂”ô–Ω–µ —Ç–∞“£–¥–∞—É
            const shuffled1 = [...level1Questions].sort(() => Math.random() - 0.5);
            const shuffled2 = [...level2Questions].sort(() => Math.random() - 0.5);
            const shuffled3 = [...level3Questions].sort(() => Math.random() - 0.5);
            
            // –î–µ“£–≥–µ–π–ª–µ—Ä –±–æ–π—ã–Ω—à–∞ —Å“±—Ä–∞“õ—Ç–∞—Ä–¥—ã “õ–æ—Å—É
            gameQuestions.push(...shuffled1.slice(0, questionsPerLevel));
            gameQuestions.push(...shuffled2.slice(0, questionsPerLevel));
            gameQuestions.push(...shuffled3.slice(0, questionsPerLevel));
            
            // –ï–≥–µ—Ä –∂–µ—Ç–∫—ñ–ª—ñ–∫—Å—ñ–∑ –±–æ–ª—Å–∞, “õ–æ—Å—ã–º—à–∞ —Å“±—Ä–∞“õ—Ç–∞—Ä “õ–æ—Å—É
            while (gameQuestions.length < totalQuestions) {
                const allShuffled = [...baseQuestions].sort(() => Math.random() - 0.5);
                for (let q of allShuffled) {
                    if (!gameQuestions.includes(q)) {
                        gameQuestions.push(q);
                        if (gameQuestions.length >= totalQuestions) break;
                    }
                }
            }
            
            // –°“±—Ä–∞“õ—Ç–∞—Ä–¥—ã –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä—É
            gameQuestions = gameQuestions.sort(() => Math.random() - 0.5);
        }

        function addTeam() {
            if (gameState.teamCount >= 6) {
                alert('–ú–∞–∫—Å–∏–º—É–º 6 –∫–æ–º–∞–Ω–¥–∞ “õ–æ—Å—É“ì–∞ –±–æ–ª–∞–¥—ã!');
                return;
            }
            
            gameState.teamCount++;
            gameState.teams.push({ name: '', avatar: '', progress: 0, frequency: 0, correctAnswers: 0, totalAnswers: 0, rank: 0 });
            
            const teamsContainer = document.getElementById('teamsContainer');
            const teamNumber = gameState.teamCount;
            const teamColor = teamColors[teamNumber - 1];
            
            const teamSetup = document.createElement('div');
            teamSetup.className = 'team-setup';
            teamSetup.setAttribute('data-team', teamNumber);
            
            teamSetup.innerHTML = `
                <h3>${teamColor} ${teamNumber}-–∫–æ–º–∞–Ω–¥–∞</h3>
                <input type="text" id="team${teamNumber}Name" placeholder="–ö–æ–º–∞–Ω–¥–∞ –∞—Ç–∞—É—ã" 
                       style="width: 100%; padding: 10px; border-radius: 5px; border: none; margin-bottom: 15px;">
                
                <h4>–ê–≤–∞—Ç–∞—Ä —Ç–∞“£–¥–∞“£—ã–∑:</h4>
                <div class="avatar-selection">
                    <div class="avatar" onclick="selectAvatar(${teamNumber}, 'engineer')" data-avatar="engineer">
                        <div style="font-size: 30px;">${teamEmojis.engineer[teamNumber - 1]}</div>
                        <div>–ò–Ω–∂–µ–Ω–µ—Ä</div>
                    </div>
                    <div class="avatar" onclick="selectAvatar(${teamNumber}, 'scientist')" data-avatar="scientist">
                        <div style="font-size: 30px;">${teamEmojis.scientist[teamNumber - 1]}</div>
                        <div>–ó–µ—Ä—Ç—Ç–µ—É—à—ñ</div>
                    </div>
                    <div class="avatar" onclick="selectAvatar(${teamNumber}, 'electronics')" data-avatar="electronics">
                        <div style="font-size: 30px;">${teamEmojis.electronics[teamNumber - 1]}</div>
                        <div>–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫</div>
                    </div>
                    <div class="avatar" onclick="selectAvatar(${teamNumber}, 'physicist')" data-avatar="physicist">
                        <div style="font-size: 30px;">${teamEmojis.physicist[teamNumber - 1]}</div>
                        <div>–§–∏–∑–∏–∫</div>
                    </div>
                    <div class="avatar" onclick="selectAvatar(${teamNumber}, 'inventor')" data-avatar="inventor">
                        <div style="font-size: 30px;">${teamEmojis.inventor[teamNumber - 1]}</div>
                        <div>–û–π–ª–∞–ø —Ç–∞–±—É—à—ã</div>
                    </div>
                    <div class="avatar" onclick="selectAvatar(${teamNumber}, 'robot')" data-avatar="robot">
                        <div style="font-size: 30px;">${teamEmojis.robot[teamNumber - 1]}</div>
                        <div>–†–æ–±–æ—Ç</div>
                    </div>
                </div>
            `;
            
            teamsContainer.appendChild(teamSetup);
            document.getElementById('teamCount').textContent = gameState.teamCount;
            
            // CSS —Å—Ç–∏–ª—ñ–Ω –∂–∞“£–∞—Ä—Ç—É
            if (gameState.teamCount > 2) {
                teamsContainer.style.gridTemplateColumns = 'repeat(auto-fit, minmax(300px, 1fr))';
            }
            
            playSound('select');
        }

        function removeTeam() {
            if (gameState.teamCount <= 2) {
                alert('–ú–∏–Ω–∏–º—É–º 2 –∫–æ–º–∞–Ω–¥–∞ –±–æ–ª—É—ã –∫–µ—Ä–µ–∫!');
                return;
            }
            
            // –°–æ“£“ì—ã –∫–æ–º–∞–Ω–¥–∞–Ω—ã ”©—à—ñ—Ä—É
            const teamsContainer = document.getElementById('teamsContainer');
            const lastTeam = teamsContainer.querySelector(`[data-team="${gameState.teamCount}"]`);
            if (lastTeam) {
                lastTeam.remove();
            }
            
            gameState.teamCount--;
            gameState.teams.pop();
            
            document.getElementById('teamCount').textContent = gameState.teamCount;
            
            // CSS —Å—Ç–∏–ª—ñ–Ω –∂–∞“£–∞—Ä—Ç—É
            if (gameState.teamCount <= 2) {
                teamsContainer.style.gridTemplateColumns = '1fr 1fr';
            }
            
            playSound('select');
        }

        function selectAvatar(team, avatar) {
            // –ê–ª–¥—ã“£“ì—ã —Ç–∞“£–¥–∞—É–¥—ã –∞–ª—ã–ø —Ç–∞—Å—Ç–∞—É
            document.querySelectorAll(`[data-team="${team}"] .avatar`).forEach(av => {
                av.classList.remove('selected');
            });
            
            // –ñ–∞“£–∞ —Ç–∞“£–¥–∞—É–¥—ã –±–µ–ª–≥—ñ–ª–µ—É
            event.target.closest('.avatar').classList.add('selected');
            gameState.teams[team - 1].avatar = avatar;
            
            playSound('select');
        }

        function startGame() {
            // –ë–∞—Ä–ª—ã“õ –∫–æ–º–∞–Ω–¥–∞–ª–∞—Ä–¥—ã“£ –∞—Ç–∞—É—ã –º–µ–Ω –∞–≤–∞—Ç–∞—Ä—ã –±–∞—Ä –µ–∫–µ–Ω—ñ–Ω —Ç–µ–∫—Å–µ—Ä—É
            for (let i = 0; i < gameState.teamCount; i++) {
                const teamName = document.getElementById(`team${i + 1}Name`).value || `–ö–æ–º–∞–Ω–¥–∞ ${i + 1}`;
                if (!gameState.teams[i].avatar) {
                    alert(`${i + 1}-–∫–æ–º–∞–Ω–¥–∞ –∞–≤–∞—Ç–∞—Ä —Ç–∞“£–¥–∞—É—ã –∫–µ—Ä–µ–∫!`);
                    return;
                }
                gameState.teams[i].name = teamName;
            }
            
            gameState.gameStarted = true;
            
            // –°“±—Ä–∞“õ—Ç–∞—Ä–¥—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏—è–ª–∞—É
            generateGameQuestions();
            
            document.getElementById('setupPhase').style.display = 'none';
            document.getElementById('gamePhase').style.display = 'block';
            
            updateTeamDisplay();
            updateRaceTrack();
            loadQuestion();
            createParticles();
            playSound('start');
        }

        function updateTeamDisplay() {
            const teamInfo = document.querySelector('.team-info');
            teamInfo.innerHTML = '';
            
            for (let i = 0; i < gameState.teamCount; i++) {
                const team = gameState.teams[i];
                const teamColor = teamColors[i];
                const avatarEmoji = teamEmojis[team.avatar][i];
                
                const teamCard = document.createElement('div');
                teamCard.className = 'team-card';
                teamCard.innerHTML = `
                    <h3 id="team${i + 1}Display">${teamColor} ${team.name}</h3>
                    <div id="team${i + 1}Avatar" style="font-size: 40px;">${avatarEmoji}</div>
                    <div class="frequency-meter">
                        <div class="frequency-bar" id="team${i + 1}Progress" style="width: 0%">
                            <div class="resonance-zone"></div>
                        </div>
                    </div>
                    <div>–ñ–∏—ñ–ª—ñ–∫: <span id="team${i + 1}Freq">0</span> –ì—Ü</div>
                `;
                teamInfo.appendChild(teamCard);
            }
        }

        function updateRaceTrack() {
            const raceTrack = document.querySelector('.race-track');
            const tracksContainer = raceTrack.querySelector('div:nth-child(2)').parentNode;
            
            // –ï—Å–∫—ñ –∂–æ–ª–¥–∞—Ä–¥—ã ”©—à—ñ—Ä—É
            const oldTracks = tracksContainer.querySelectorAll('.track');
            oldTracks.forEach(track => track.remove());
            
            // –ñ–∞“£–∞ –∂–æ–ª–¥–∞—Ä “õ–æ—Å—É
            for (let i = 0; i < gameState.teamCount; i++) {
                const teamColor = teamColors[i];
                const track = document.createElement('div');
                track.className = 'track';
                track.innerHTML = `
                    <div class="team-car" id="car${i + 1}" style="background: linear-gradient(45deg, ${getTeamGradient(i)}); left: 10px;">${teamColor}</div>
                    <div class="finish-line"></div>
                `;
                tracksContainer.appendChild(track);
            }
        }

        function getTeamGradient(teamIndex) {
            const gradients = [
                '#FF6B6B, #FF8E53',
                '#4ECDC4, #44A08D', 
                '#A8E6CF, #7FCDCD',
                '#FFD93D, #FF6B6B',
                '#B19CD9, #C9A9DD',
                '#FFB347, #FFCC5C'
            ];
            return gradients[teamIndex] || '#667eea, #764ba2';
        }

        function loadQuestion() {
            if (gameState.currentQuestion >= gameQuestions.length) {
                // –ë–∞—Ä–ª—ã“õ —Å“±—Ä–∞“õ—Ç–∞—Ä –∞—è“õ—Ç–∞–ª–¥—ã
                setTimeout(() => showWinner(), 1000);
                return;
            }
            
            const question = gameQuestions[gameState.currentQuestion];
            const questionsPerTeam = 6;
            const totalQuestions = gameState.teamCount * questionsPerTeam;
            const currentRound = Math.floor(gameState.currentQuestion / gameState.teamCount) + 1;
            
            // –î–µ“£–≥–µ–π –∞–Ω—ã“õ—Ç–∞—É
            let levelName = "–ù–µ–≥—ñ–∑–≥—ñ –¥–µ“£–≥–µ–π";
            let levelDescription = "–†–µ–∑–æ–Ω–∞–Ω—Å —Ç—É—Ä–∞–ª—ã –Ω–µ–≥—ñ–∑–≥—ñ –±—ñ–ª—ñ–º–¥–µ—Ä–¥—ñ —Ç–µ–∫—Å–µ—Ä—É";
            
            if (question.level === 1) {
                levelName = "1-–¥–µ“£–≥–µ–π: –ù–µ–≥—ñ–∑–≥—ñ “±“ì—ã–º–¥–∞—Ä";
                levelDescription = "–†–µ–∑–æ–Ω–∞–Ω—Å –∂–∏—ñ–ª—ñ–≥—ñ –º–µ–Ω –Ω–µ–≥—ñ–∑–≥—ñ –∑–∞“£–¥—ã–ª—ã“õ—Ç–∞—Ä";
            } else if (question.level === 2) {
                levelName = "2-–¥–µ“£–≥–µ–π: “ö–∞—Å–∏–µ—Ç—Ç–µ—Ä –º–µ–Ω ”ô—Å–µ—Ä–ª–µ—Ä";
                levelDescription = "–†–µ–∑–æ–Ω–∞–Ω—Å –∫–µ–∑—ñ–Ω–¥–µ–≥—ñ —Ñ–∏–∑–∏–∫–∞–ª—ã“õ –ø—Ä–æ—Ü–µ—Å—Ç–µ—Ä";
            } else if (question.level === 3) {
                levelName = "3-–¥–µ“£–≥–µ–π: –ï—Å–µ–ø—Ç–µ—É–ª–µ—Ä –º–µ–Ω “õ–æ–ª–¥–∞–Ω—É";
                levelDescription = "–ü—Ä–∞–∫—Ç–∏–∫–∞–ª—ã“õ –µ—Å–µ–ø—Ç–µ—Ä –º–µ–Ω —Ç–µ—Ö–Ω–∏–∫–∞–ª—ã“õ “õ–æ–ª–¥–∞–Ω—É";
            }
            
            document.getElementById('currentLevel').textContent = levelName;
            document.getElementById('levelDescription').textContent = levelDescription;
            document.getElementById('questionText').textContent = question.question;
            
            const teamColor = teamColors[gameState.currentTeam];
            document.getElementById('currentTeam').textContent = `${teamColor} ${gameState.teams[gameState.currentTeam].name}`;
            
            const answersContainer = document.getElementById('answersContainer');
            answersContainer.innerHTML = '';
            
            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = answer;
                button.onclick = () => selectAnswer(index, question.correct);
                answersContainer.appendChild(button);
            });
            
            document.getElementById('nextBtn').style.display = 'none';
            
            // –ü—Ä–æ–≥—Ä–µ—Å—Å –∫”©—Ä—Å–µ—Ç—É
            const progressText = `–°“±—Ä–∞“õ ${gameState.currentQuestion + 1}/${totalQuestions} | –†–∞—É–Ω–¥ ${currentRound}`;
            if (!document.getElementById('progressInfo')) {
                const progressDiv = document.createElement('div');
                progressDiv.id = 'progressInfo';
                progressDiv.style.textAlign = 'center';
                progressDiv.style.marginBottom = '15px';
                progressDiv.style.fontSize = '14px';
                progressDiv.style.opacity = '0.8';
                document.querySelector('.question-panel').insertBefore(progressDiv, document.querySelector('.question'));
            }
            document.getElementById('progressInfo').textContent = progressText;
        }

        function selectAnswer(selected, correct) {
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach((btn, index) => {
                btn.disabled = true;
                if (index === correct) {
                    btn.classList.add('correct');
                } else if (index === selected && selected !== correct) {
                    btn.classList.add('incorrect');
                }
            });
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–Ω—ã –∂–∞“£–∞—Ä—Ç—É
            gameState.teams[gameState.currentTeam].totalAnswers++;
            
            if (selected === correct) {
                // –î“±—Ä—ã—Å –∂–∞—É–∞–ø - –ø—Ä–æ–≥—Ä–µ—Å—Å “õ–æ—Å—É
                gameState.teams[gameState.currentTeam].correctAnswers++;
                const progressIncrease = Math.floor(100 / 6); // 6 —Å“±—Ä–∞“õ “Ø—à—ñ–Ω 100%
                gameState.teams[gameState.currentTeam].progress += progressIncrease;
                gameState.teams[gameState.currentTeam].frequency += 50;
                updateProgress();
                playSound('correct');
                
                if (gameState.teams[gameState.currentTeam].progress >= 100) {
                    // –ö–æ–º–∞–Ω–¥–∞ –∂–µ“£–¥—ñ
                    gameState.gameFinished = true;
                    calculateRanking();
                    setTimeout(() => showWinner(), 1000);
                    return;
                }
            } else {
                // “ö–∞—Ç–µ –∂–∞—É–∞–ø
                playSound('incorrect');
            }
            
            // –ö–µ–ª–µ—Å—ñ –∫–æ–º–∞–Ω–¥–∞“ì–∞ ”©—Ç—É
            gameState.currentTeam = (gameState.currentTeam + 1) % gameState.teamCount;
            gameState.currentQuestion++;
            
            // –ë–∞—Ä–ª—ã“õ —Å“±—Ä–∞“õ—Ç–∞—Ä –∞—è“õ—Ç–∞–ª–¥—ã –º–∞ —Ç–µ–∫—Å–µ—Ä—É
            if (gameState.currentQuestion >= gameQuestions.length) {
                gameState.gameFinished = true;
                calculateRanking();
                setTimeout(() => showWinner(), 1000);
                return;
            }
            
            document.getElementById('nextBtn').style.display = 'block';
        }

        function nextQuestion() {
            loadQuestion();
        }

        function updateProgress() {
            for (let i = 0; i < gameState.teamCount; i++) {
                const teamProgress = Math.min(gameState.teams[i].progress, 100);
                
                const progressBar = document.getElementById(`team${i + 1}Progress`);
                const freqDisplay = document.getElementById(`team${i + 1}Freq`);
                const car = document.getElementById(`car${i + 1}`);
                
                if (progressBar) progressBar.style.width = teamProgress + '%';
                if (freqDisplay) freqDisplay.textContent = gameState.teams[i].frequency;
                if (car) car.style.left = (10 + (teamProgress * 3.5)) + 'px';
                
                // –†–µ–∑–æ–Ω–∞–Ω—Å —ç—Ñ—Ñ–µ–∫—Ç—ñ—Å—ñ
                if (teamProgress >= 85) {
                    const teamCard = document.querySelector(`.team-card:nth-child(${i + 1})`);
                    if (teamCard) teamCard.classList.add('resonance-effect');
                }
            }
        }

        function showWinner() {
            let winner = 0;
            let maxProgress = gameState.teams[0].progress;
            
            // –ñ–µ“£—ñ–º–ø–∞–∑–¥—ã —Ç–∞–±—É
            for (let i = 1; i < gameState.teamCount; i++) {
                if (gameState.teams[i].progress > maxProgress) {
                    maxProgress = gameState.teams[i].progress;
                    winner = i;
                }
            }
            
            // 100% –∂–µ—Ç–∫–µ–Ω –∫–æ–º–∞–Ω–¥–∞–ª–∞—Ä–¥—ã —Ç–µ–∫—Å–µ—Ä—É
            for (let i = 0; i < gameState.teamCount; i++) {
                if (gameState.teams[i].progress >= 100) {
                    winner = i;
                    break;
                }
            }
            
            document.getElementById('winnerTeam').textContent = gameState.teams[winner].name;
            document.getElementById('winnerModal').style.display = 'flex';
            
            playSound('winner');
            createCelebrationParticles();
        }

        function restartGame() {
            // –û–π—ã–Ω –∫“Ø–π—ñ–Ω “õ–∞–π—Ç–∞ –æ—Ä–Ω–∞—Ç—É
            const teamCount = gameState.teamCount;
            gameState = {
                teams: [],
                currentTeam: 0,
                currentLevel: 1,
                currentQuestion: 0,
                soundEnabled: true,
                gameStarted: false,
                teamCount: 2,
                gameFinished: false
            };
            
            // –ö–æ–º–∞–Ω–¥–∞–ª–∞—Ä–¥—ã “õ–∞–π—Ç–∞ –æ—Ä–Ω–∞—Ç—É
            for (let i = 0; i < 2; i++) {
                gameState.teams.push({ name: '', avatar: '', progress: 0, frequency: 0, correctAnswers: 0, totalAnswers: 0, rank: 0 });
            }
            
            document.getElementById('winnerModal').style.display = 'none';
            document.getElementById('rankingModal').style.display = 'none';
            document.getElementById('setupPhase').style.display = 'block';
            document.getElementById('gamePhase').style.display = 'none';
            
            // “ö–æ—Å—ã–º—à–∞ –∫–æ–º–∞–Ω–¥–∞–ª–∞—Ä–¥—ã ”©—à—ñ—Ä—É
            const teamsContainer = document.getElementById('teamsContainer');
            const extraTeams = teamsContainer.querySelectorAll('[data-team]');
            extraTeams.forEach((team, index) => {
                if (index >= 2) {
                    team.remove();
                }
            });
            
            // CSS —Å—Ç–∏–ª—ñ–Ω “õ–∞–π—Ç–∞ –æ—Ä–Ω–∞—Ç—É
            teamsContainer.style.gridTemplateColumns = '1fr 1fr';
            document.getElementById('teamCount').textContent = '2';
            
            // –§–æ—Ä–º–∞–Ω—ã —Ç–∞–∑–∞–ª–∞—É
            for (let i = 1; i <= teamCount; i++) {
                const nameInput = document.getElementById(`team${i}Name`);
                if (nameInput) nameInput.value = '';
            }
            
            document.querySelectorAll('.avatar').forEach(av => av.classList.remove('selected'));
            document.querySelectorAll('.resonance-effect').forEach(el => {
                el.classList.remove('resonance-effect');
            });
        }

        function toggleSound() {
            gameState.soundEnabled = !gameState.soundEnabled;
            document.getElementById('soundBtn').textContent = 
                gameState.soundEnabled ? 'üîä –î—ã–±—ã—Å: “ö–æ—Å—É–ª—ã' : 'üîá –î—ã–±—ã—Å: ”®—à—ñ—Ä—É–ª—ñ';
        }

        function playSound(type) {
            if (!gameState.soundEnabled) return;
            
            // –î—ã–±—ã—Å—Ç—ã“õ —ç—Ñ—Ñ–µ–∫—Ç—Ç–µ—Ä–¥—ñ –∏–º–∏—Ç–∞—Ü–∏—è–ª–∞—É
            const frequencies = {
                select: 800,
                correct: 1000,
                incorrect: 300,
                start: 600,
                winner: 1200
            };
            
            // Web Audio API –∞—Ä“õ—ã–ª—ã –¥—ã–±—ã—Å —à—ã“ì–∞—Ä—É
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(frequencies[type], audioContext.currentTime);
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            } catch (e) {
                console.log('Audio not supported');
            }
        }

        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            
            setInterval(() => {
                if (gameState.gameStarted) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    
                    particlesContainer.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 5000);
                }
            }, 500);
        }

        function createCelebrationParticles() {
            const particlesContainer = document.getElementById('particles');
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.background = ['#FFD700', '#FF6B6B', '#4ECDC4', '#45B7D1'][Math.floor(Math.random() * 4)];
                    particle.style.animationDuration = (Math.random() * 2 + 1) + 's';
                    
                    particlesContainer.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 3000);
                }, i * 100);
            }
        }

        function calculateRanking() {
            // –ö–æ–º–∞–Ω–¥–∞–ª–∞—Ä–¥—ã —Ä–µ–π—Ç–∏–Ω–≥ –±–æ–π—ã–Ω—à–∞ —Å“±—Ä—ã–ø—Ç–∞—É
            const sortedTeams = [...gameState.teams].sort((a, b) => {
                // –ê–ª–¥—ã–º–µ–Ω –¥“±—Ä—ã—Å –∂–∞—É–∞–ø—Ç–∞—Ä —Å–∞–Ω—ã –±–æ–π—ã–Ω—à–∞
                if (b.correctAnswers !== a.correctAnswers) {
                    return b.correctAnswers - a.correctAnswers;
                }
                // –°–æ–¥–∞–Ω –∫–µ–π—ñ–Ω –¥”ô–ª–¥—ñ–∫ –ø–∞–π—ã–∑—ã –±–æ–π—ã–Ω—à–∞
                const accuracyA = a.totalAnswers > 0 ? (a.correctAnswers / a.totalAnswers) * 100 : 0;
                const accuracyB = b.totalAnswers > 0 ? (b.correctAnswers / b.totalAnswers) * 100 : 0;
                if (accuracyB !== accuracyA) {
                    return accuracyB - accuracyA;
                }
                // –°–æ“£—ã–Ω–¥–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å –±–æ–π—ã–Ω—à–∞
                return b.progress - a.progress;
            });

            // –†–µ–π—Ç–∏–Ω–≥ –æ—Ä—ã–Ω–¥–∞—Ä—ã–Ω –±–µ–ª–≥—ñ–ª–µ—É
            sortedTeams.forEach((team, index) => {
                const originalIndex = gameState.teams.findIndex(t => 
                    t.name === team.name && t.avatar === team.avatar
                );
                gameState.teams[originalIndex].rank = index + 1;
            });
        }

        function showRanking() {
            document.getElementById('winnerModal').style.display = 'none';
            
            const rankingTable = document.getElementById('rankingTable');
            
            // –ö–æ–º–∞–Ω–¥–∞–ª–∞—Ä–¥—ã —Ä–µ–π—Ç–∏–Ω–≥ –±–æ–π—ã–Ω—à–∞ —Å“±—Ä—ã–ø—Ç–∞—É
            const sortedTeams = [...gameState.teams].sort((a, b) => {
                if (b.correctAnswers !== a.correctAnswers) {
                    return b.correctAnswers - a.correctAnswers;
                }
                const accuracyA = a.totalAnswers > 0 ? (a.correctAnswers / a.totalAnswers) * 100 : 0;
                const accuracyB = b.totalAnswers > 0 ? (b.correctAnswers / b.totalAnswers) * 100 : 0;
                if (accuracyB !== accuracyA) {
                    return accuracyB - accuracyA;
                }
                return b.progress - a.progress;
            });

            let tableHTML = `
                <table class="ranking-table">
                    <thead>
                        <tr>
                            <th>–û—Ä—ã–Ω</th>
                            <th>–ö–æ–º–∞–Ω–¥–∞</th>
                            <th>–ê–≤–∞—Ç–∞—Ä</th>
                            <th>–î“±—Ä—ã—Å –∂–∞—É–∞–ø—Ç–∞—Ä</th>
                            <th>–ë–∞—Ä–ª—ã“õ –∂–∞—É–∞–ø—Ç–∞—Ä</th>
                            <th>–î”ô–ª–¥—ñ–∫</th>
                            <th>–ü—Ä–æ–≥—Ä–µ—Å—Å</th>
                            <th>–ñ–∏—ñ–ª—ñ–∫</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            sortedTeams.forEach((team, index) => {
                const rank = index + 1;
                const accuracy = team.totalAnswers > 0 ? Math.round((team.correctAnswers / team.totalAnswers) * 100) : 0;
                const medal = rank === 1 ? 'ü•á' : rank === 2 ? 'ü•à' : rank === 3 ? 'ü•â' : `${rank}`;
                const rankClass = rank <= 3 ? `rank-${rank}` : '';
                const teamColor = teamColors[gameState.teams.findIndex(t => t.name === team.name && t.avatar === team.avatar)];
                const avatarEmoji = teamEmojis[team.avatar][gameState.teams.findIndex(t => t.name === team.name && t.avatar === team.avatar)];

                tableHTML += `
                    <tr class="${rankClass}">
                        <td><span class="rank-medal">${medal}</span></td>
                        <td><strong>${teamColor} ${team.name}</strong></td>
                        <td style="font-size: 24px;">${avatarEmoji}</td>
                        <td><span class="stat-number">${team.correctAnswers}</span></td>
                        <td>${team.totalAnswers}</td>
                        <td>
                            <div>${accuracy}%</div>
                            <div class="accuracy-bar">
                                <div class="accuracy-fill" style="width: ${accuracy}%"></div>
                            </div>
                        </td>
                        <td>${Math.round(team.progress)}%</td>
                        <td>${team.frequency} –ì—Ü</td>
                    </tr>
                `;
            });

            tableHTML += `
                    </tbody>
                </table>
            `;

            // –ñ–∞–ª–ø—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ “õ–æ—Å—É
            const totalQuestions = gameQuestions.length;
            const totalCorrect = gameState.teams.reduce((sum, team) => sum + team.correctAnswers, 0);
            const totalAnswered = gameState.teams.reduce((sum, team) => sum + team.totalAnswers, 0);
            const overallAccuracy = totalAnswered > 0 ? Math.round((totalCorrect / totalAnswered) * 100) : 0;

            tableHTML += `
                <div class="team-stats">
                    <div class="stat-card">
                        <h4>üìä –ñ–∞–ª–ø—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4>
                        <div class="stat-number">${totalCorrect}/${totalAnswered}</div>
                        <div>–î“±—Ä—ã—Å –∂–∞—É–∞–ø—Ç–∞—Ä</div>
                    </div>
                    <div class="stat-card">
                        <h4>üéØ –ñ–∞–ª–ø—ã –¥”ô–ª–¥—ñ–∫</h4>
                        <div class="stat-number">${overallAccuracy}%</div>
                        <div class="accuracy-bar">
                            <div class="accuracy-fill" style="width: ${overallAccuracy}%"></div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <h4>üèÜ –ß–µ–º–ø–∏–æ–Ω</h4>
                        <div style="font-size: 20px;">${teamColors[gameState.teams.findIndex(t => t.rank === 1)]} ${sortedTeams[0].name}</div>
                        <div>${sortedTeams[0].correctAnswers} –¥“±—Ä—ã—Å –∂–∞—É–∞–ø</div>
                    </div>
                </div>
            `;

            rankingTable.innerHTML = tableHTML;
            document.getElementById('rankingModal').style.display = 'flex';
        }

        function hideRanking() {
            document.getElementById('rankingModal').style.display = 'none';
            document.getElementById('winnerModal').style.display = 'flex';
        }

        // –û–π—ã–Ω–¥—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è–ª–∞—É
        document.addEventListener('DOMContentLoaded', () => {
            createParticles();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98b868a49115ecf5',t:'MTc1OTk1NTU2MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
